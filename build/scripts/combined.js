function addCommas(e){for(var t=(e+="").split("."),i=t[0],n=t.length>1?"."+t[1]:"",a=/(\d+)(\d{3})/;a.test(i);)i=i.replace(a,"$1,$2");return i+n}function camelize(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0==t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}var isOpera=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox="undefined"!=typeof InstallTrigger,isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,isChrome=!!window.chrome&&!isOpera,isIE=!!document.documentMode,version=detectIE();function detectIE(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var i=e.indexOf("rv:");return parseInt(e.substring(i+3,e.indexOf(".",i)),10)}return!1}!1!==version&&alert("Internet Explorer users may experience problems with this application's functionality. We recommend using Edge, Chrome, or Firefox for best results.");var appTitle="Eastern United States Nutrient Loading",appVersion="v0.9.0",serviceBaseURL="https://sparrowtest.wim.usgs.gov/arcgis/rest/services/SparrowEast/SparrowEast_test/MapServer/",chartUnits=" (kg/yr.)",chartFeatureMax=2500,groupResultsInitIndex=1,splitLayers=[5,6,7,13,14,15],mapCenter=[-96.64,40.744];defaultZoomLevel=5;var allLayers,tableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"GRP1",name:"Main River Basin"},{field:"GRP2",name:"Tributary"},{field:"GRP_3_NA_1",name:"Join Field"},{field:"Area_g3",name:"HUC10 area (mi2)"}],stateTableOutFields=[{field:"FID",name:"Unique Feature Id"},{field:"ST_GP3_NAM",name:"HUC10/State (combination) ID"},{field:"Area_S3",name:"HUC10 area within the state and the  model area (mi2)"},{field:"ST",name:"State"},{field:"GRP_1_NAM",name:"Independent Watershed name (in which HUC10 is nested)"},{field:"GP2",name:"HUC8 (in which HUC10 is nested)"},{field:"GRP_3_NAM",name:"HUC10"},{field:"ST_GP1_NAM",name:"State and Independent Watershed"},{field:"ST_GP2_NAM",name:"State amd HUC8"},{field:"ST_gp3_n_1",name:"Join Field"}],aggregateDefinitions={st:"State",gp1:"River Basin",gp2:"HUC8",gp3:"HUC12",sg1:"State_River Basin",sg2:"State_HUC8",sg3:"State_HUC12"},catchmentDefinitions={comid:"Catchment ID",st_comid:"Catchment ID by State",pname:"Catchment Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},catchmentDefinitions_tn={comid:"Catchment ID",st_comid:"Catchment ID by State",pname:"Catchment Name",accl:"Accumulated load (kg)",incl:"Incremental load (kg)",accy:"Accumulated yield (kg/km2)",incy:"Incremental yield (kg/km2)",daccl:"Delivered accumulated load (kg)",daccy:"Delivered accumulated yield (kg/km2)",dincl:"Delivered incremental load  (kg)",dincy:"Delivered incremental yield (kg/km2)"},mappedDefinitions={area:"Aggregated area (km2)",al:"Aggregated load (kg)",ay:"Aggregated yield (kg/km2)",dal:"Delivered aggregated load (kg)",day:"Delivered aggregated yield (kg/km2)",ap:"Percent of aggregated load",dap:"Percent of delivered aggregated load"},phosphorusSourceDefinitons={s1:"Wastewater",s2:"Urban Land",s3:"Manure",s4:"Fertilizer Applied to Agricultural Land",s5:"Deposition from Power Plant Air Emissions",s6:"Deposition from Other Industrial Air Emissions",s7:"Deposition from Vehicle Emissions",s8:"Deposition from Background"},nitrogenSourceDefinitions={s1:"Wastewater",s2:"Urban Land",s3:"Manure",s4:"Fertilizer Applied to Agricultural Land",s5:"Deposition from Power Plant Air Emissions",s6:"Deposition from Other Industrial Air Emissions",s7:"Deposition from Vehicle Emissions",s8:"Deposition from Background"},phosColors=["#BF0000","#FFCCFF","#663100","#FFEC99","#97DA7C","#0070C0","#bf8040"],nitroColors=["#BF0000","#FFCCFF","#0070C0","#663100","#FFEC99","#97DA7C"],Catchments=[{field:"ACCL",name:catchmentDefinitions.accl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"ACCL_S1",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6},{attribute:"ACCL_S7",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s7},{attribute:"ACCL_S8",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s8}]},{field:"INCL",name:catchmentDefinitions.incl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"INCL_S1",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4},{attribute:"INCL_S5",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6},{attribute:"INCL_S7",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s7},{attribute:"INCL_S8",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s8}]},{field:"ACCY",name:catchmentDefinitions.accy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"ACCY_S1",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCY_S2",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCY_S3",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCY_S4",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCY_S5",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCY_S6",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s6},{attribute:"ACCY_S7",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s7},{attribute:"ACCY_S8",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s8}]},{field:"INCY",name:catchmentDefinitions.incy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"INCY_S1",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s1},{attribute:"INCY_S2",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s2},{attribute:"INCY_S3",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s3},{attribute:"INCY_S4",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s4},{attribute:"INCY_S5",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s5},{attribute:"INCY_S6",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s6},{attribute:"INCY_S7",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s7},{attribute:"INCY_S8",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s8}]},{field:"DACCL",name:catchmentDefinitions.daccl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DACCL_S1",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s1},{attribute:"DACCL_S2",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s2},{attribute:"DACCL_S3",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s3},{attribute:"DACCL_S4",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s4},{attribute:"DACCL_S5",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s5},{attribute:"DACCL_S6",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s6},{attribute:"DACCL_S7",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s7},{attribute:"DACCL_S8",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s8}]},{field:"DACCY",name:catchmentDefinitions.daccy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DACCY_S1",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s1},{attribute:"DACCY_S2",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s2},{attribute:"DACCY_S3",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s3},{attribute:"DACCY_S4",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s4},{attribute:"DACCY_S5",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s5},{attribute:"DACCY_S6",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s6},{attribute:"DACCY_S7",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s7},{attribute:"DACCY_S8",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s8}]},{field:"DINCL",name:catchmentDefinitions.dincl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DINCL_S1",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6},{attribute:"DINCL_S7",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s7},{attribute:"DINCL_S8",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s8}]},{field:"DINCY",name:catchmentDefinitions.dincy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DINCY_S1",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCY_S2",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCY_S3",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCY_S4",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCY_S5",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCY_S6",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s6},{attribute:"DINCY_S7",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s7},{attribute:"DINCY_S8",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s8}]}],Group3=[{field:"GP3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],Group2=[{field:"GP2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"GP2_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"GP2_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"GP2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"GP2_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"GP2_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"GP2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"GP2_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"GP2_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"GP2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP2_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP2_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP2_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP2_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP2_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"GP2_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"GP2_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],Group1=[{field:"GP1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"GP1_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"GP1_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"GP1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"GP1_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"GP1_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"GP1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"GP1_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"GP1_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"GP1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP1_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP1_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP1_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP1_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP1_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"GP1_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"GP1_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],ST=[{field:"ST_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"ST_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"ST_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"ST_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"ST_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"ST_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"ST_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"ST_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"ST_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"ST_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"ST_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"ST_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"ST_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"ST_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"ST_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"ST_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"ST_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],Catchments_st=[{field:"ACCL",name:catchmentDefinitions.accl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"ACCL_S1",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCL_S2",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCL_S3",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCL_S4",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCL_S5",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCL_S6",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s6},{attribute:"ACCL_S7",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s7},{attribute:"ACCL_S8",label:catchmentDefinitions.accl+" "+phosphorusSourceDefinitons.s8}]},{field:"INCL",name:catchmentDefinitions.incl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"INCL_S1",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s1},{attribute:"INCL_S2",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s2},{attribute:"INCL_S3",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s3},{attribute:"INCL_S4",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s4},{attribute:"INCL_S5",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s5},{attribute:"INCL_S6",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s6},{attribute:"INCL_S7",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s7},{attribute:"INCL_S8",label:catchmentDefinitions.incl+" "+phosphorusSourceDefinitons.s8}]},{field:"ACCY",name:catchmentDefinitions.accy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"ACCY_S1",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s1},{attribute:"ACCY_S2",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s2},{attribute:"ACCY_S3",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s3},{attribute:"ACCY_S4",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s4},{attribute:"ACCY_S5",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s5},{attribute:"ACCY_S6",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s6},{attribute:"ACCY_S7",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s7},{attribute:"ACCY_S8",label:catchmentDefinitions.accy+" "+phosphorusSourceDefinitons.s8}]},{field:"INCY",name:catchmentDefinitions.incy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"INCY_S1",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s1},{attribute:"INCY_S2",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s2},{attribute:"INCY_S3",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s3},{attribute:"INCY_S4",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s4},{attribute:"INCY_S5",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s5},{attribute:"INCY_S6",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s6},{attribute:"INCY_S7",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s7},{attribute:"INCY_S7",label:catchmentDefinitions.incy+" "+phosphorusSourceDefinitons.s7}]},{field:"DACCL",name:catchmentDefinitions.daccl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DACCL_S1",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s1},{attribute:"DACCL_S2",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s2},{attribute:"DACCL_S3",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s3},{attribute:"DACCL_S4",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s4},{attribute:"DACCL_S5",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s5},{attribute:"DACCL_S6",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s6},{attribute:"DACCL_S7",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s7},{attribute:"DACCL_S8",label:catchmentDefinitions.daccl+" "+phosphorusSourceDefinitons.s8}]},{field:"DACCY",name:catchmentDefinitions.daccy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DACCY_S1",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s1},{attribute:"DACCY_S2",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s2},{attribute:"DACCY_S3",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s3},{attribute:"DACCY_S4",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s4},{attribute:"DACCY_S5",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s5},{attribute:"DACCY_S6",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s6},{attribute:"DACCY_S7",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s7},{attribute:"DACCY_S8",label:catchmentDefinitions.daccy+" "+phosphorusSourceDefinitons.s8}]},{field:"DINCL",name:catchmentDefinitions.dincl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DINCL_S1",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCL_S2",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCL_S3",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCL_S4",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCL_S5",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCL_S6",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s6},{attribute:"DINCL_S7",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s7},{attribute:"DINCL_S8",label:catchmentDefinitions.dincl+" "+phosphorusSourceDefinitons.s8}]},{field:"DINCY",name:catchmentDefinitions.dincy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DINCY_S1",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s1},{attribute:"DINCY_S2",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s2},{attribute:"DINCY_S3",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s3},{attribute:"DINCY_S4",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s4},{attribute:"DINCY_S5",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s5},{attribute:"DINCY_S6",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s6},{attribute:"DINCY_S7",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s7},{attribute:"DINCY_S8",label:catchmentDefinitions.dincy+" "+phosphorusSourceDefinitons.s8}]}],Group3_st=(Group3=[{field:"GP3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"GP3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"GP3_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"GP3_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"GP3_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"GP3_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"GP3_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"GP3_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"GP3_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],[{field:"SG3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"SG3_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"SG3_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"SG3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"SG3_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"SG3_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"SG3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"SG3_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"SG3_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"SG3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG3_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG3_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG3_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG3_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG3_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"SG3_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"SG3_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}]),Group2_st=[{field:"SG2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"SG2_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"SG2_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"SG2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"SG2_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"SG2_DAL_S8",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s8}]},{field:"SG2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"SG2_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"SG2_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"SG2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG2_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG2_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG2_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG2_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG2_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"SG2_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"SG2_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],Group1_st=[{field:"SG1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AL_S1",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AL_S2",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AL_S3",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AL_S4",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AL_S5",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AL_S6",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s6},{attribute:"SG1_AL_S7",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s7},{attribute:"SG1_AL_S8",label:mappedDefinitions.al+" "+phosphorusSourceDefinitons.s8}]},{field:"SG1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAL_S1",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAL_S2",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAL_S3",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAL_S4",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAL_S5",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAL_S6",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s6},{attribute:"SG1_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7},{attribute:"SG1_DAL_S7",label:mappedDefinitions.dal+" "+phosphorusSourceDefinitons.s7}]},{field:"SG1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AY_S1",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_AY_S2",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_AY_S3",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_AY_S4",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_AY_S5",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_AY_S6",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s6},{attribute:"SG1_AY_S7",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s7},{attribute:"SG1_AY_S8",label:mappedDefinitions.ay+" "+phosphorusSourceDefinitons.s8}]},{field:"SG1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAY_S1",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s1},{attribute:"SG1_DAY_S2",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s2},{attribute:"SG1_DAY_S3",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s3},{attribute:"SG1_DAY_S4",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s4},{attribute:"SG1_DAY_S5",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s5},{attribute:"SG1_DAY_S6",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s6},{attribute:"SG1_DAY_S7",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s7},{attribute:"SG1_DAY_S8",label:mappedDefinitions.day+" "+phosphorusSourceDefinitons.s8}]}],Catchments_tn=[{field:"ACCL",name:catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5},{attribute:"ACCL_S6",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s6}]},{field:"INCL",name:catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"INCL_S1",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5},{attribute:"INCL_S6",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s6}]},{field:"ACCY",name:catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"ACCY_S1",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCY_S2",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCY_S3",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCY_S4",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCY_S5",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s5},{attribute:"ACCY_S6",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s6}]},{field:"INCY",name:catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"INCY_S1",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s1},{attribute:"INCY_S2",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s2},{attribute:"INCY_S3",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s3},{attribute:"INCY_S4",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s4},{attribute:"INCY_S5",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s5},{attribute:"INCY_S6",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s6}]},{field:"DACCL",name:catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DACCL_S1",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s1},{attribute:"DACCL_S2",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s2},{attribute:"DACCL_S3",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s3},{attribute:"DACCL_S4",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s4},{attribute:"DACCL_S5",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s5},{attribute:"DACCL_S6",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s6}]},{field:"DACCY",name:catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DACCY_S1",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s1},{attribute:"DACCY_S2",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s2},{attribute:"DACCY_S3",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s3},{attribute:"DACCY_S4",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s4},{attribute:"DACCY_S5",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s5},{attribute:"DACCY_S6",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s6}]},{field:"DINCL",name:catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5},{attribute:"DINCL_S6",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s6}]},{field:"DINCY",name:catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"COMID",label:catchmentDefinitions.comid},{attribute:"DINCY_S1",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCY_S2",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCY_S3",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCY_S4",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCY_S5",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s5},{attribute:"DINCY_S6",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s6}]}],Group3_tn=[{field:"GP3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"GP3_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"GP3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"GP3_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"GP3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"GP3_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"GP3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP3",label:aggregateDefinitions.gp3},{attribute:"GP3_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP3_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP3_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP3_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP3_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"GP3_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],Group2_tn=[{field:"GP2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"GP2_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"GP2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"GP2_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"GP2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"GP2_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"GP2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP2",label:aggregateDefinitions.gp2},{attribute:"GP2_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP2_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP2_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP2_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP2_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"GP2_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],Group1_tn=[{field:"GP1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"GP1_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"GP1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"GP1_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"GP1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"GP1_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"GP1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"GP1",label:aggregateDefinitions.gp1},{attribute:"GP1_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"GP1_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"GP1_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"GP1_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"GP1_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"GP1_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],ST_tn=[{field:"ST_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"ST_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"ST_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"ST_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"ST_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"ST_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"ST_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"ST",label:aggregateDefinitions.st},{attribute:"ST_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"ST_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"ST_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"ST_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"ST_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"ST_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],Catchments_st_tn=[{field:"ACCL",name:catchmentDefinitions_tn.accl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"ACCL_S1",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCL_S2",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCL_S3",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCL_S4",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCL_S5",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s5},{attribute:"ACCL_S6",label:catchmentDefinitions_tn.accl+" "+nitrogenSourceDefinitions.s6}]},{field:"INCL",name:catchmentDefinitions_tn.incl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"INCL_S1",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s1},{attribute:"INCL_S2",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s2},{attribute:"INCL_S3",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s3},{attribute:"INCL_S4",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s4},{attribute:"INCL_S5",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s5},{attribute:"INCL_S6",label:catchmentDefinitions_tn.incl+" "+nitrogenSourceDefinitions.s6}]},{field:"ACCY",name:catchmentDefinitions_tn.accy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"ACCY_S1",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s1},{attribute:"ACCY_S2",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s2},{attribute:"ACCY_S3",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s3},{attribute:"ACCY_S4",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s4},{attribute:"ACCY_S5",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s5},{attribute:"ACCY_S6",label:catchmentDefinitions_tn.accy+" "+nitrogenSourceDefinitions.s6}]},{field:"INCY",name:catchmentDefinitions_tn.incy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"INCY_S1",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s1},{attribute:"INCY_S2",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s2},{attribute:"INCY_S3",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s3},{attribute:"INCY_S4",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s4},{attribute:"INCY_S5",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s5},{attribute:"INCY_S6",label:catchmentDefinitions_tn.incy+" "+nitrogenSourceDefinitions.s6}]},{field:"DACCL",name:catchmentDefinitions_tn.daccl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DACCL_S1",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s1},{attribute:"DACCL_S2",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s2},{attribute:"DACCL_S3",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s3},{attribute:"DACCL_S4",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s4},{attribute:"DACCL_S5",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s5},{attribute:"DACCL_S6",label:catchmentDefinitions_tn.daccl+" "+nitrogenSourceDefinitions.s6}]},{field:"DACCY",name:catchmentDefinitions_tn.daccy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DACCY_S1",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s1},{attribute:"DACCY_S2",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s2},{attribute:"DACCY_S3",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s3},{attribute:"DACCY_S4",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s4},{attribute:"DACCY_S5",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s5},{attribute:"DACCY_S6",label:catchmentDefinitions_tn.daccy+" "+nitrogenSourceDefinitions.s6}]},{field:"DINCL",name:catchmentDefinitions_tn.dincl,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DINCL_S1",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCL_S2",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCL_S3",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCL_S4",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCL_S5",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s5},{attribute:"DINCL_S6",label:catchmentDefinitions_tn.dincl+" "+nitrogenSourceDefinitions.s6}]},{field:"DINCY",name:catchmentDefinitions_tn.dincy,chartOutfields:[{attribute:"ST_COMID",label:catchmentDefinitions.st_comid},{attribute:"DINCY_S1",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s1},{attribute:"DINCY_S2",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s2},{attribute:"DINCY_S3",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s3},{attribute:"DINCY_S4",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s4},{attribute:"DINCY_S5",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s5},{attribute:"DINCY_S6",label:catchmentDefinitions_tn.dincy+" "+nitrogenSourceDefinitions.s6}]}],Group3_st_tn=[{field:"SG3_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"SG3_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"SG3_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"SG3_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"SG3_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"SG3_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"SG3_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG3",label:aggregateDefinitions.sg3},{attribute:"SG3_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG3_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG3_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG3_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG3_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"SG3_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],Group2_st_tn=[{field:"SG2_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"SG2_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"SG2_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"SG2_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"SG2_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"SG2_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"SG2_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG2",label:aggregateDefinitions.sg2},{attribute:"SG2_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG2_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG2_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG2_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG2_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"SG2_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],Group1_st_tn=[{field:"SG1_AL",name:mappedDefinitions.al,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AL_S1",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AL_S2",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AL_S3",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AL_S4",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AL_S5",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s5},{attribute:"SG1_AL_S6",label:mappedDefinitions.al+" "+nitrogenSourceDefinitions.s6}]},{field:"SG1_DAL",name:mappedDefinitions.dal,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAL_S1",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAL_S2",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAL_S3",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAL_S4",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAL_S5",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s5},{attribute:"SG1_DAL_S6",label:mappedDefinitions.dal+" "+nitrogenSourceDefinitions.s6}]},{field:"SG1_AY",name:mappedDefinitions.ay,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_AY_S1",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_AY_S2",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_AY_S3",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_AY_S4",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_AY_S5",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s5},{attribute:"SG1_AY_S6",label:mappedDefinitions.ay+" "+nitrogenSourceDefinitions.s6}]},{field:"SG1_DAY",name:mappedDefinitions.day,chartOutfields:[{attribute:"SG1",label:aggregateDefinitions.sg1},{attribute:"SG1_DAY_S1",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s1},{attribute:"SG1_DAY_S2",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s2},{attribute:"SG1_DAY_S3",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s3},{attribute:"SG1_DAY_S4",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s4},{attribute:"SG1_DAY_S5",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s5},{attribute:"SG1_DAY_S6",label:mappedDefinitions.day+" "+nitrogenSourceDefinitions.s6}]}],queryParameters={grp3:{idField:"GRP_3_NUM",nameField:["GRP_3_NAM","GRP_2_NAM","GRP_1_NAM","ST"],alias:"HUC10",serviceId:4,AOISelect:!1},grp2:{idField:"GRP_2_NUM",nameField:["GRP_2_NAM"],alias:"HUC8",serviceId:1,AOISelect:!0},grp1:{idField:"GRP_1_NUM",nameField:["GRP_1_NAM"],alias:"Independent Watershed",serviceId:2,AOISelect:!0},st:{idField:"ST",nameField:["ST"],alias:"State",serviceId:3,AOISelect:!0}};require(["esri/geometry/Extent","esri/layers/WMSLayerInfo","esri/layers/FeatureLayer","esri/layers/ImageParameters","esri/layers/LayerDrawingOptions","dojo/domReady!"],function(e,t,i,n,a){var o;o=1==$("#radio1")[0].checked?0:1;var s=new a;s.scaleSymbols=!0,allLayers=[{groupHeading:"Nutrient Model",showGroupHeading:!0,includeInLayerList:!0,layers:{"Nutrient Model Results Overlay":{url:serviceBaseURL,visibleLayers:[o],options:{id:"SparrowRanking",opacity:.75,visible:!0,layerDrawingOptions:s},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Model Calibration Sites",showGroupHeading:!0,includeInLayerList:!0,layers:{"Phosphorus Calibration Sites":{url:serviceBaseURL,visibleLayers:[18],options:{id:"phosCalibration",opacity:.85,visible:!1},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,zoomScale:144448,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!0}},"Nitrogen Calibration Sites":{url:serviceBaseURL,visibleLayers:[19],options:{id:"nitroCalibration",visible:!1,opacity:.85},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}},{groupHeading:"Auxiliary Layers",showGroupHeading:!0,includeInLayerList:!0,layers:{"MARB Streams":{url:serviceBaseURL,visibleLayers:[20],options:{id:"streams",visible:!1},wimOptions:{type:"layer",layerType:"agisFeature",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}},"MARB SPARROW Model Area":{url:serviceBaseURL,visibleLayers:[21],options:{id:"modelArea",visible:!1,opacity:.35},wimOptions:{type:"layer",layerType:"agisDynamic",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}},"Land Use 2002":{url:"https://gis.wim.usgs.gov/arcgis/rest/services/SWTrends/lu2002_100515_test/ImageServer",options:{id:"lu2002",opacity:.5,visible:!1},wimOptions:{type:"layer",layerType:"agisImage",includeInLayerList:!0,hasOpacitySlider:!0,hasZoomto:!1,includeLegend:!1}}}}]}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){"use strict";var t=e.each,i=e.pick,n=e.seriesTypes,a=void 0!==document.createElement("a").download;function o(t,i,n,o,s){var r,l,p,c=((t.options.exporting||{}).csv||{}).url||"https://www.highcharts.com/studies/csv-export/download.php";p=t.options.exporting.filename?t.options.exporting.filename:t.title?t.title.textStr.replace(/ /g,"-").toLowerCase():"chart",window.Blob&&window.navigator.msSaveOrOpenBlob?(l=new Blob([o]),window.navigator.msSaveOrOpenBlob(l,p+"."+n)):a?((r=document.createElement("a")).href=i,r.target="_blank",r.download=p+"."+n,t.container.append(r),r.click(),r.remove()):e.post(c,{data:o,type:s,extension:n})}e.setOptions({lang:{downloadCSV:"Download CSV",downloadXLS:"Download XLS",viewData:"View data table"}}),e.Chart.prototype.getDataRows=function(){var n,a,o,s,r,l,p,c=(this.options.exporting||{}).csv||{},u=this.xAxis,d={},f=[],h=[],S=c.dateFormat||"%Y-%m-%d %H:%M:%S",D=c.columnHeaderFormatter||function(t,i,n){return t instanceof e.Axis?t.options.title&&t.options.title.text||(t.isDatetimeAxis?"DateTime":"Category"):t?t.name+(n>1?" ("+i+")":""):"Category"},b=[];for(s in o=0,t(this.series,function(n){var a,s=n.options.keys||n.pointArrayMap||["y"],r=s.length,l=n.requireSorting,p={},c=e.inArray(n.xAxis,u);if(t(s,function(e){p[e]=n[e+"Axis"]&&n[e+"Axis"].categories||[]}),!1!==n.options.includeInCSVExport&&!1!==n.visible){for(e.find(b,function(e){return e[0]===c})||b.push([c,o]),a=0;a<r;)h.push(D(n,s[a],s.length)),a+=1;t(n.points,function(e,t){var u,f,h=l?e.x:t;for(a=0,d[h]||(d[h]=[],d[h].xValues=[]),d[h].x=e.x,d[h].xValues[c]=e.x,n.xAxis&&"name"!==n.exportKey||(d[h].name=e.name);a<r;)f=e[u=s[a]],d[h][o+a]=i(p[u][f],f),a+=1}),o+=a}}),d)d.hasOwnProperty(s)&&f.push(d[s]);for(a=[h],o=b.length;o--;)l=b[o][0],p=b[o][1],n=u[l],f.sort(function(e,t){return e.xValues[l]-t.xValues[l]}),r=D(n),a[0].splice(p,0,r),t(f,function(t){var a=t.name;a||(n.isDatetimeAxis?(t.x instanceof Date&&(t.x=t.x.getTime()),a=e.dateFormat(S,t.x)):a=n.categories?i(n.names[t.x],n.categories[t.x],t.x):t.x),t.splice(p,0,a)});return a=a.concat(f)},e.Chart.prototype.getCSV=function(e){var i="",n=this.getDataRows(),a=(this.options.exporting||{}).csv||{},o=a.itemDelimiter||",",s=a.lineDelimiter||"\n";return t(n,function(t,a){for(var r="",l=t.length,p=e?1.1.toLocaleString()[1]:".";l--;)"string"==typeof(r=t[l])&&(r='"'+r+'"'),"number"==typeof r&&","===p&&(r=r.toString().replace(".",",")),t[l]=r;i+=t.join(o),a<n.length-1&&(i+=s)}),i},e.Chart.prototype.getTable=function(e){var i="<table><thead>",n=this.getDataRows();return t(n,function(t,n){var a,o,s=n?"td":"th",r=e?1.1.toLocaleString()[1]:".";for(i+="<tr>",o=0;o<t.length;o+=1)"number"==typeof(a=t[o])?(a=a.toString(),","===r&&(a=a.replace(".",r)),i+="<"+s+' class="number">'+a+"</"+s+">"):i+="<"+s+">"+(void 0===a?"":a)+"</"+s+">";i+="</tr>",n||(i+="</thead><tbody>")}),i+="</tbody></table>"},e.Chart.prototype.downloadCSV=function(){var e=this.getCSV(!0);o(this,"data:text/csv,\ufeff"+encodeURIComponent(e),"csv",e,"text/csv")},e.Chart.prototype.downloadXLS=function(){var e,t='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head>\x3c!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>Ark1</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--\x3e<style>td{border:none;font-family: Calibri, sans-serif;} .number{mso-number-format:"0.00";}</style><meta name=ProgId content=Excel.Sheet><meta charset=UTF-8></head><body>'+this.getTable(!0)+"</body></html>";o(this,"data:application/vnd.ms-excel;base64,"+(e=t,window.btoa(unescape(encodeURIComponent(e)))),"xls",t,"application/vnd.ms-excel")},e.Chart.prototype.viewData=function(){this.dataTableDiv||(this.dataTableDiv=document.createElement("div"),this.dataTableDiv.className="highcharts-data-table",this.renderTo.parentNode.insertBefore(this.dataTableDiv,this.renderTo.nextSibling)),this.dataTableDiv.innerHTML=this.getTable()},e.getOptions().exporting&&e.getOptions().exporting.buttons.contextButton.menuItems.push({textKey:"downloadCSV",onclick:function(){this.downloadCSV()}},{textKey:"downloadXLS",onclick:function(){this.downloadXLS()}},{textKey:"viewData",onclick:function(){this.viewData()}}),n.map&&(n.map.prototype.exportKey="name"),n.mapbubble&&(n.mapbubble.prototype.exportKey="name")}),function(e){"object"==typeof module&&module.exports?module.exports=e:e(Highcharts)}(function(e){!function(e){var t=e.defaultOptions,i=e.doc,n=e.Chart,a=e.addEvent,o=e.removeEvent,s=e.fireEvent,r=e.createElement,l=e.discardElement,p=e.css,c=e.merge,u=e.pick,d=e.each,f=e.objectEach,h=e.extend,S=e.isTouchDevice,D=e.win,b=D.navigator.userAgent,m=e.Renderer.prototype.symbols;/Edge\/|Trident\/|MSIE /.test(b),/firefox/i.test(b),h(t.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),t.navigation={buttonOptions:{theme:{},symbolSize:14,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,verticalAlign:"top",width:24}},c(!0,t.navigation,{menuStyle:{border:"1px solid #999999",background:"#ffffff",padding:"5px 0"},menuItemStyle:{padding:"0.5em 1em",background:"none",color:"#333333",fontSize:S?"14px":"11px",transition:"background 250ms, color 250ms"},menuItemHoverStyle:{background:"#335cad",color:"#ffffff"},buttonOptions:{symbolFill:"#666666",symbolStroke:"#666666",symbolStrokeWidth:3,theme:{fill:"#ffffff",stroke:"none",padding:5}}}),t.exporting={type:"image/png",url:"https://export.highcharts.com/",printMaxWidth:780,scale:2,buttons:{contextButton:{className:"highcharts-contextbutton",menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},e.post=function(e,t,n){var a=r("form",c({method:"post",action:e,enctype:"multipart/form-data"},n),{display:"none"},i.body);f(t,function(e,t){r("input",{type:"hidden",name:t,value:e},null,a)}),a.submit(),l(a)},h(n.prototype,{sanitizeSVG:function(e,t){if(t&&t.exporting&&t.exporting.allowHTML){var i=e.match(/<\/svg>(.*?$)/);i&&i[1]&&(i='<foreignObject x="0" y="0" width="'+t.chart.width+'" height="'+t.chart.height+'"><body xmlns="http://www.w3.org/1999/xhtml">'+i[1]+"</body></foreignObject>",e=e.replace("</svg>",i+"</svg>"))}return(e=e.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\(("|&quot;)(\S+)("|&quot;)\)/g,"url($2)").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g,"").replace(/&shy;/g,"")).replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()})},getChartHTML:function(){return this.container.innerHTML},getSVG:function(t){var n,a,o,s,p,u=c(this.options,t);return i.createElementNS||(i.createElementNS=function(e,t){return i.createElement(t)}),a=r("div",null,{position:"absolute",top:"-9999em",width:this.chartWidth+"px",height:this.chartHeight+"px"},i.body),o=this.renderTo.style.width,p=this.renderTo.style.height,o=u.exporting.sourceWidth||u.chart.width||/px$/.test(o)&&parseInt(o,10)||600,p=u.exporting.sourceHeight||u.chart.height||/px$/.test(p)&&parseInt(p,10)||400,h(u.chart,{animation:!1,renderTo:a,forExport:!0,renderer:"SVGRenderer",width:o,height:p}),u.exporting.enabled=!1,delete u.data,u.series=[],d(this.series,function(e){(s=c(e.userOptions,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:e.visible})).isInternal||u.series.push(s)}),d(this.axes,function(t){t.userOptions.internalKey||(t.userOptions.internalKey=e.uniqueKey())}),n=new e.Chart(u,this.callback),t&&d(["xAxis","yAxis","series"],function(e){var i={};t[e]&&(i[e]=t[e],n.update(i))}),d(this.axes,function(t){var i=e.find(n.axes,function(e){return e.options.internalKey===t.userOptions.internalKey}),a=(o=t.getExtremes()).userMin,o=o.userMax;!i||void 0===a&&void 0===o||i.setExtremes(a,o,!0,!1)}),o=n.getChartHTML(),o=this.sanitizeSVG(o,u),u=null,n.destroy(),l(a),o},getSVGForExport:function(e,t){var i=this.options.exporting;return this.getSVG(c({chart:{borderRadius:0}},i.chartOptions,t,{exporting:{sourceWidth:e&&e.sourceWidth||i.sourceWidth,sourceHeight:e&&e.sourceHeight||i.sourceHeight}}))},exportChart:function(t,i){i=this.getSVGForExport(t,i),t=c(this.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale,svg:i},t.formAttributes)},print:function(){var e,t,n=this,a=n.container,o=[],r=a.parentNode,l=i.body,p=l.childNodes,c=n.options.exporting.printMaxWidth;n.isPrinting||(n.isPrinting=!0,n.pointer.reset(null,0),s(n,"beforePrint"),(t=c&&n.chartWidth>c)&&(e=[n.options.chart.width,void 0,!1],n.setSize(c,void 0,!1)),d(p,function(e,t){1===e.nodeType&&(o[t]=e.style.display,e.style.display="none")}),l.appendChild(a),D.focus(),D.print(),setTimeout(function(){r.appendChild(a),d(p,function(e,t){1===e.nodeType&&(e.style.display=o[t])}),n.isPrinting=!1,t&&n.setSize.apply(n,e),s(n,"afterPrint")},1e3))},contextMenu:function(e,t,n,o,s,l,c){var u,f,S=this,D=S.options.navigation,b=S.chartWidth,m=S.chartHeight,g="cache-"+e,_=S[g],y=Math.max(s,l);_||(S[g]=_=r("div",{className:e},{position:"absolute",zIndex:1e3,padding:y+"px"},S.container),u=r("div",{className:"highcharts-menu"},null,_),p(u,h({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},D.menuStyle)),f=function(){p(_,{display:"none"}),c&&c.setState(0),S.openMenu=!1},S.exportEvents.push(a(_,"mouseleave",function(){_.hideTimer=setTimeout(f,500)}),a(_,"mouseenter",function(){clearTimeout(_.hideTimer)}),a(i,"mouseup",function(t){S.pointer.inClass(t.target,e)||f()})),d(t,function(e){var t;e&&(e.separator?t=r("hr",null,null,u):((t=r("div",{className:"highcharts-menu-item",onclick:function(t){t&&t.stopPropagation(),f(),e.onclick&&e.onclick.apply(S,arguments)},innerHTML:e.text||S.options.lang[e.textKey]},null,u)).onmouseover=function(){p(this,D.menuItemHoverStyle)},t.onmouseout=function(){p(this,D.menuItemStyle)},p(t,h({cursor:"pointer"},D.menuItemStyle))),S.exportDivElements.push(t))}),S.exportDivElements.push(u,_),S.exportMenuWidth=_.offsetWidth,S.exportMenuHeight=_.offsetHeight),t={display:"block"},n+S.exportMenuWidth>b?t.right=b-n-s-y+"px":t.left=n-y+"px",o+l+S.exportMenuHeight>m&&"top"!==c.alignOptions.verticalAlign?t.bottom=m-o-y+"px":t.top=o+l-y+"px",p(_,t),S.openMenu=!0},addButton:function(e){var t,i,n=this,a=n.renderer,o=c(n.options.navigation.buttonOptions,e),s=o.onclick,r=o.menuItems,l=o.symbolSize||12;if(n.btnCount||(n.btnCount=0),n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]),!1!==o.enabled){var p,d=o.theme,f=(S=d.states)&&S.hover,S=S&&S.select;delete d.states,s?p=function(e){e.stopPropagation(),s.call(n,e)}:r&&(p=function(){n.contextMenu(i.menuClassName,r,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),o.text&&o.symbol?d.paddingLeft=u(d.paddingLeft,25):o.text||h(d,{width:o.width,height:o.height,padding:0}),(i=a.button(o.text,0,0,p,d,f,S).addClass(e.className).attr({"stroke-linecap":"round",title:n.options.lang[o._titleKey],zIndex:3})).menuClassName=e.menuClassName||"highcharts-menu-"+n.btnCount++,o.symbol&&(t=a.symbol(o.symbol,o.symbolX-l/2,o.symbolY-l/2,l,l).addClass("highcharts-button-symbol").attr({zIndex:1}).add(i)).attr({stroke:o.symbolStroke,fill:o.symbolFill,"stroke-width":o.symbolStrokeWidth||1}),i.add().align(h(o,{width:i.width,x:u(o.x,n.buttonOffset)}),!0,"spacingBox"),n.buttonOffset+=(i.width+o.buttonSpacing)*("right"===o.align?-1:1),n.exportSVGElements.push(i,t)}},destroyExport:function(e){var t=e?e.target:this;e=t.exportSVGElements;var i,n=t.exportDivElements,a=t.exportEvents;e&&(d(e,function(e,n){e&&(e.onclick=e.ontouchstart=null,i="cache-"+e.menuClassName,t[i]&&delete t[i],t.exportSVGElements[n]=e.destroy())}),e.length=0),n&&(d(n,function(e,i){clearTimeout(e.hideTimer),o(e,"mouseleave"),t.exportDivElements[i]=e.onmouseout=e.onmouseover=e.ontouchstart=e.onclick=null,l(e)}),n.length=0),a&&(d(a,function(e){e()}),a.length=0)}}),m.menu=function(e,t,i,n){return["M",e,t+2.5,"L",e+i,t+2.5,"M",e,t+n/2+.5,"L",e+i,t+n/2+.5,"M",e,t+n-1.5,"L",e+i,t+n-1.5]},n.prototype.renderExporting=function(){var e=this,t=e.options.exporting,i=t.buttons,n=e.isDirtyExporting||!e.exportSVGElements;e.buttonOffset=0,e.isDirtyExporting&&e.destroyExport(),n&&!1!==t.enabled&&(e.exportEvents=[],f(i,function(t){e.addButton(t)}),e.isDirtyExporting=!1),a(e,"destroy",e.destroyExport)},n.prototype.callbacks.push(function(e){e.renderExporting(),a(e,"redraw",e.renderExporting),d(["exporting","navigation"],function(t){e[t]={update:function(i,n){e.isDirtyExporting=!0,c(!0,e.options[t],i),u(n,!0)&&e.redraw()}}})})}(e)});var app={};function loadEventHandlers(){$(".radio").on("change",function(e){$("#page-loader").fadeIn();var t=$("#groupResultsSelect")[0].selectedIndex,i=this.firstElementChild.id;populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(t,i),generateRenderer()}),$("#phosphorusDownload").click(function(){window.location=phosphorusShapefileURL}),$("#nitrogenDownload").click(function(){window.location=nitrogenShapefileURL}),$("#phosphorusCalibrationDownload").click(function(){window.location=phosCalibrationURL}),$("#nitrogenCalibrationDownload").click(function(){window.location=nitroCalibrationURL}),$("#PNGChartDownload").click(function(){app.downloadPNGofChart()}),$("#CSVChartDownload").click(function(){app.downloadCSVofChart()}),$("#showMiniChart").click(function(){1==$("#miniChartContainer")[0].hidden?($("#miniChartContainer")[0].hidden=!1,$("#showMiniChart").text("(Hide Chart)")):($("#miniChartContainer")[0].hidden=!0,$("#showMiniChart").text("(Show Chart Example)"))}),$("#showMiniChart").click(function(){$("#miniChartContainer").attr("hidden")}),$("#chartDownload").on("click",function(){app.downloadChartPNG()}),$(".aoiSelect").on("change",AOIChange),$("#groupResultsSelect").on("loaded.bs.select",function(){populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),generateRenderer()});var e=$("#clickPolyButton");function t(e,t,i,n,a){$("#clearAOIButton").append("<a class='"+e+"' data-toggle='tooltip' data-placement='top' title='Cannot show "+t+" Area of Interest while grouping by "+i+".'><span class='glyphicon glyphicon-warning-sign'></span></a>"),$(n+" option").attr("selected",!1),app.clearOneLayerDefObj(a),AOIChange({currentTarget:{id:n,value:""}})}e.click(function(){app.clickSelectionActive?(e.removeClass("active"),$("#shiftNote").remove(),e.html('<span class="glyphicon glyphicon-plus"></span>&nbsp;&nbsp;Select'),app.map.setMapCursor("auto"),app.clickSelectionActive=!1,$("#chartButton").prop("disabled",!1)):app.clickSelectionActive||($("#customSelect").append('<div id="shiftNote" style="padding-left: 1em;color: orangered;">Shift+Click to Deselect</div>'),e.addClass("active"),e.html('<i class="glyphicon glyphicon-stop"></i>&nbsp;&nbsp;Stop selecting'),app.map.setMapCursor("crosshair"),$("#chartButton").prop("disabled",!0),app.clickSelectionActive=!0)}),$("#groupResultsSelect").on("changed.bs.select",function(e){app.clearFindGraphics(),populateMetricOptions(e.currentTarget.selectedIndex),setAggregateGroup(e.currentTarget.selectedIndex,$(".radio input[type='radio']:checked")[0].id),generateRenderer()}),$("#displayedMetricSelect").on("changed.bs.select",function(e){$("#page-loader").fadeIn(),generateRenderer()}),$("#clearAOIButton").on("click",function(){$("#page-loader").show();var e=app.map.getLayer("SparrowRanking").visibleLayers[0];if($.inArray(e,splitLayers)>-1){e=returnDefaultLayer(e,$(".radio input[type='radio']:checked")[0].id);var t=[];t.push(e),app.map.getLayer("SparrowRanking").setVisibleLayers(t),app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0)}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(!0);$(".aoiSelect").selectpicker("val",""),populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),app.clearLayerDefObj(),generateRenderer(),$(".grp1-warning").remove(),$(".grp2-warning").remove(),$(".grp3-warning").remove(),$("#groupResultsSelect option").each(function(){this.disabled=!1}),$("#groupResultsSelect").selectpicker("render")}),$(".nonAOISelect").on("change",function(){switch($("#page-loader").fadeIn(),$("#grp1-select").removeClass("disabled"),$("#grp1-select").removeAttr("disabled"),$(".grp1-warning").remove(),$("#grp2-select").removeClass("disabled"),$("#grp2-select").removeAttr("disabled"),$(".grp2-warning").remove(),$("#grp3-select").removeClass("disabled"),$("#grp3-select").removeAttr("disabled"),$(".grp3-warning").remove(),$("#groupResultsSelect")[0].selectedIndex){case 0:$("#grp1-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 1:app.getLayerDefObj().AOI2&&t("grp2-warning","HUC8","HUC12","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#grp3-select").selectpicker("refresh");break;case 2:app.getLayerDefObj().AOI3&&t("grp3-warning","HUC12","HUC8","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh");break;case 3:app.getLayerDefObj().AOI2&&t("grp2-warning","HUC8","River Basin","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&t("grp3-warning","HUC12","River Basin","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh");break;case 4:app.getLayerDefObj().AOI1&&t("grp1-warning","River Basin","State","#grp1-select","AOI1"),$("#grp1-select").attr("disabled","disabled"),$("#grp1-select").addClass("disabled"),$("#grp1-select").selectpicker("refresh"),app.getLayerDefObj().AOI2&&t("grp2-warning","HUC8","State","#grp2-select","AOI2"),$("#grp2-select").attr("disabled","disabled"),$("#grp2-select").addClass("disabled"),$("#grp2-select").selectpicker("refresh"),app.getLayerDefObj().AOI3&&t("grp3-warning","HUC12","State","#grp3-select","AOI3"),$("#grp3-select").attr("disabled","disabled"),$("#grp3-select").addClass("disabled"),$("#grp3-select").selectpicker("refresh")}}),$("#chartButton").on("click",function(){""!=app.userSelectedDispFieldName?(app.formattedHighlightString=app.userSelectedDispFieldName+" IN ("+app.userSelectedShapes.join(",")+")",app.customChartClicked=!0,app.createChartQuery(app.formattedHighlightString),app.userSelectedDispFieldName="",app.userSelectedShapes=[]):app.createChartQuery()}),$(window).resize(function(){$("#legendCollapse").hasClass("in")?(maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("height",maxLegendHeight),$("#legendElement").css("max-height",maxLegendHeight),maxLegendDivHeight=$("#legendElement").height()-parseInt($("#legendHeading").css("height").replace("px","")),$("#legendDiv").css("max-height",maxLegendDivHeight)):$("#legendElement").css("height","initial")}),app.map.on("load",function(){app.initMapScale(),app.map.infoWindow.set("highlight",!1),app.map.infoWindow.set("titleInBody",!1),app.setupDraggableInfoWindow(),app.map.disableClickRecenter()}),app.map.on("update-end",function(){$("#page-loader").fadeOut()}),app.map.on("zoom-end",function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e)}),app.map.on("mouse-move",function(e){app.updateMousePosition(e)}),app.map.on("pan-end",function(){app.updateMapCenter(app.map.extent)}),app.map.on("click",function(e){app.identifyParams=new esri.tasks.IdentifyParameters,app.identifyParams.tolerance=8,app.identifyParams.returnGeometry=!0,app.identifyParams.layerOption=esri.tasks.IdentifyParameters.LAYER_OPTION_VISIBLE,app.identifyParams.width=app.map.width,app.identifyParams.height=app.map.height,app.identifyTask=new esri.tasks.IdentifyTask(serviceBaseURL),app.map.getLayer("SparrowRanking").layerDefinitions&&(app.identifyParams.layerDefinitions=app.map.getLayer("SparrowRanking").layerDefinitions),app.executeIdentifyTask(e)}),$("#btnStreets").on("click",function(){app.map.setBasemap("streets"),app.map.removeLayer(nationalMapBasemap)}),$("#btnSatellite").on("click",function(){app.map.setBasemap("satellite"),app.map.removeLayer(nationalMapBasemap)}),$("#btnHybrid").on("click",function(){app.map.setBasemap("hybrid"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTerrain").on("click",function(){app.map.setBasemap("terrain"),app.map.removeLayer(nationalMapBasemap)}),$("#btnGray").on("click",function(){app.map.setBasemap("gray"),app.map.removeLayer(nationalMapBasemap)}),$("#btnNatGeo").on("click",function(){app.map.setBasemap("national-geographic"),app.map.removeLayer(nationalMapBasemap)}),$("#btnOSM").on("click",function(){app.map.setBasemap("osm"),app.map.removeLayer(nationalMapBasemap)}),$("#btnTopo").on("click",function(){app.map.setBasemap("topo"),app.map.removeLayer(nationalMapBasemap)})}function populateMetricOptions(e){var t;if($("#displayedMetricSelect")[0].selectedOptions.length>0){var i=$("#displayedMetricSelect")[0].selectedOptions[0].label;$("#displayedMetricSelect option:selected")}if("radio1"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Catchments_st:Catchments;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group3_st:Group3;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group2_st:Group2;break;case 3:t=$("#st-select")[0].selectedIndex>0?Group1_st:Group1;break;case 4:t=ST}else if("radio2"==$(".radio input[type='radio']:checked")[0].id)switch(e){case 0:t=$("#st-select")[0].selectedIndex>0?Catchments_st_tn:Catchments_tn;break;case 1:t=$("#st-select")[0].selectedIndex>0?Group3_st_tn:Group3_tn;break;case 2:t=$("#st-select")[0].selectedIndex>0?Group2_st_tn:Group2_tn;break;case 3:t=$("#st-select")[0].selectedIndex>0?Group1_st_tn:Group1_tn;break;case 4:t=ST_tn}$("#displayedMetricSelect").find("option").remove(),$.each(t,function(e,t){$("#displayedMetricSelect").append(new Option(t.name,t.field)),$("#displayedMetricSelect").selectpicker("refresh")});var n=function(e,t){for(var i=0,n=t.length;i<n;i++)if(e===t[i].name)return t[i];return null};i&&null!=n(i,t)?$("#displayedMetricSelect").selectpicker("val",n(i,t).field):$("#displayedMetricSelect").selectpicker("val",t[0].field)}function returnDefaultLayer(e){switch(e){case 5:return 0;case 6:return 1;case 7:return 2;case 8:return 3;case 14:return 9;case 15:return 10;case 16:return 11;case 17:return 12}}function setAggregateGroup(e,t){if("radio1"==t)switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?5:0;break;case 1:i=$("#st-select")[0].selectedIndex>0?6:1;break;case 2:i=$("#st-select")[0].selectedIndex>0?7:2;break;case 3:i=$("#st-select")[0].selectedIndex>0?8:3;break;case 4:i=4}else if("radio2"==t){var i;switch(e){case 0:i=$("#st-select")[0].selectedIndex>0?14:9;break;case 1:i=$("#st-select")[0].selectedIndex>0?15:10;break;case 2:i=$("#st-select")[0].selectedIndex>0?16:11;break;case 3:i=$("#st-select")[0].selectedIndex>0?17:12;break;case 4:i=13}}var n=[i];app.map.getLayer("SparrowRanking").setVisibleLayers(n)}function AOIChange(e){$("#page-loader").fadeIn();var t=e.currentTarget.id,i=e.currentTarget.value,n=$("#groupResultsSelect")[0].selectedIndex,a={selectedId:t,selectedValue:i};"st-select"==t&&4!=n&&(populateMetricOptions($("#groupResultsSelect")[0].selectedIndex),setAggregateGroup(n,$(".radio input[type='radio']:checked")[0].id)),""!=a.selectedValue&&app.setLayerDefObj(a),setLayerDefs(),generateRenderer(),"visible"==$("#chartWindowDiv").css("visibility")&&($("#toast_title").html("Loading..."),$("#toast_body").html("Chart updating"),$("#toast-fixed").fadeIn(),app.map.graphics.clear(),app.createChartQuery())}function setLayerDefs(){var e="",t=app.getLayerDefObj();t.AOIST&&(e+=""!=e?" AND ST = '"+t.AOIST+"'":"ST = '"+t.AOIST+"'"),t.AOI1&&(e+=""!=e?" AND GP1 = '"+t.AOI1+"'":"GP1 = '"+t.AOI1+"'"),t.AOI2&&(e+=""!=e?" AND GP2 = '"+t.AOI2+"'":"GP2 = '"+t.AOI2+"'"),t.AOI3&&(e+=""!=e?" AND GP3 = '"+t.AOI3+"'":"GP3 = '"+t.AOI3+"'");var i=[];i[0]=e,i[1]=e,i[2]=e,i[3]=e,i[4]=e,i[5]=e,i[6]=e,i[7]=e,i[8]=e,i[9]=e,i[10]=e,i[11]=e,i[12]=e,i[13]=e,i[14]=e,i[15]=e,i[16]=e,i[17]=e,app.map.getLayer("SparrowRanking").setLayerDefinitions(i)}function getTableFields(e,t){var i=[],n=[],a=[],o="";switch(t){case 0:a=Group3,o="GP3",$.each(tableOutFields,function(e,t){i.push(t)});break;case 4:a=Group3_st,o="SG3",$.each(stateTableOutFields,function(e,t){i.push(t)});break;case 7:a=Group3_tn,o="GP3",$.each(tableOutFields,function(e,t){i.push(t)});break;case 11:a=Group3_st_tn,o="SG3",$.each(stateTableOutFields,function(e,t){i.push(t)})}return $.each(a,function(e,t){i.push({field:t.field,name:t.name}),$.each(t.chartOutfields,function(e,t){t.attribute==o&&i.map(function(e){return e.field}).indexOf(o)<0?i.push({field:t.attribute,name:t.label}):t.attribute!=o&&i.push({field:t.attribute,name:t.label})})}),n.push("<tr>"),$.each(e,function(e,t){$.each(i,function(e,i){if(t==i.field)return n.push("<th>"+i.name+"</th>"),!1})}),n.push("</tr>"),n.join("")}function getLegendLabels(e){var t="",i=app.getLayerConfigObject(e),n=e<8?"Total Phosphorus":"Total Nitrogen";return $.each(i,function(e,i){$("#displayedMetricSelect").val()==i.field&&(t=i.name)}),n+", "+t}function getChartOutfields(e){var t=[],i=app.getLayerConfigObject(e);return $.each(i,function(e,i){$("#displayedMetricSelect").val()==i.field&&$.each(i.chartOutfields,function(e,i){t.push(i)})}),t}function getExtraOutfields(e,t){var i=e;switch(t){case 0:case 9:i.push("AREASQKM"),i.push("DIVDASQKM"),i.push("COMID");break;case 1:case 10:i.push("GP3_AREA");break;case 2:case 11:i.push("GP2_AREA");break;case 3:case 12:i.push("GP1_AREA");break;case 4:case 13:i.push("ST_AREA");break;case 5:case 14:i.push("AREASQKM"),i.push("AREASQKM"),i.push("ST_COMID");break;case 6:case 15:i.push("SG3_AREA");break;case 7:case 16:i.push("SG2_AREA");break;case 8:case 17:i.push("SG1_AREA")}return i}function generateRenderer(){require(["esri/map","esri/Color","esri/dijit/Legend","esri/layers/LayerDrawingOptions","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/tasks/query","esri/tasks/QueryTask","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,i,n,a,o,s,r,l,p,c,u,d,f,h){var S=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions){var D=app.map.getLayer("SparrowRanking").layerDefinitions[S];app.layerDef=D}else app.map.getLayer("SparrowRanking").setDefaultLayerDefinitions(),app.layerDef="1=1";app.Url=serviceBaseURL+S;var b=new c,m=new u(app.Url);b.where=app.layerDef,m.executeForCount(b,function(e){app.polygonResponseCount=e,app.polygonResponseCount>2500&&$("#chartButton").prop("disabled",!1)?($("#chartButton").prop("disabled",!0),$("#fromMapTab").prop("disabled",!0)):($("#chartButton").prop("disabled",!1),$("#fromMapTab").prop("disabled",!1)),"visible"==$("#chartWindowDiv").css("visibility")&&(app.polygonResponseCount>2500?($("#toast_title").html("Warning"),$("#toast_body").html("Cannot show chart for "+app.polygonResponseCount+" features. Please narrow Area of Interest or Group Results and try again."),$("#toast-fixed").fadeIn(),setTimeout(function(){$("#toast-fixed").fadeOut()},5e3),app.map.graphics.clear(),$("#chartButton").html("Show Chart for All Map Features"),app.formattedHighlightString="",$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty(),$("#chartWindowPanelTitle").empty()):app.createChartQuery())},function(e){console.log(e)});var g=$("#displayedMetricSelect")[0].value;app.outFields=[g],app.currentAttribute=g;var _=new s;_.classificationField=app.currentAttribute,_.classificationMethod="quantile",_.breakCount=5,"Catchment"==$("#groupResultsSelect")[0].value?_.baseSymbol=new o("solid",null,null):_.baseSymbol=new o(o.STYLE_SOLID,new a(a.STYLE_SOLID,new t([168,168,168]),.1));var y=new r;"radio1"==$(".radio input[type='radio']:checked")[0].id?(y.fromColor=new t.fromHex("#FFF1DC"),y.toColor=new t.fromHex("#632E0E")):(y.fromColor=new t.fromHex("#F5EBB8"),y.toColor=new t.fromHex("#004120")),y.algorithm="hsv",_.colorRamp=y;var A=new l;A.classificationDefinition=_,A.formatLabel=!1,A.where=app.layerDef,new p(app.Url).execute(A,function(e){function t(e){if(e>0){var t=Math.pow(10,3-Math.floor(Math.log(e)/Math.LN10)-1);return Math.round(e*t)/t}return e}$.each(e.infos,function(i,n){var a=t(n.minValue),o=t(n.maxValue);if(4==i)var s=a.toString()+" <";else var s=a.toString()+" - "+o.toString();e.infos[i].label=s}),function(e){var t=app.map.getLayer("SparrowRanking").visibleLayers[0],a=app.map.getLayer("SparrowRanking"),o=[],s=new n;s.renderer=e,o[t]=s,a.setLayerDrawingOptions(o),app.hasOwnProperty("legend")?app.legend.refresh([{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]):(app.legend=new i({map:app.map,layerInfos:[{layer:app.map.getLayer("SparrowRanking"),title:getLegendLabels(app.map.getLayer("SparrowRanking").visibleLayers[0])}]},d.byId("legendDiv")),app.legend.startup());0==a.visible&&a.show()}(e)},function(e){console.log("generateRenderer Err ",e),$("#page-loader").fadeOut()})})}$(document).ready(function(){$(".nav-title").html(appTitle),$('[data-toggle="tooltip"]').tooltip()}),require(["esri/arcgis/utils","esri/map","esri/tasks/QueryTask","esri/tasks/query","esri/Color","esri/dijit/HomeButton","esri/dijit/LocateButton","esri/layers/ArcGISTiledMapServiceLayer","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/layers/ArcGISImageServiceLayer","esri/layers/WMSLayer","esri/dijit/Geocoder","esri/dijit/PopupTemplate","esri/graphic","esri/geometry/Extent","esri/geometry/Multipoint","esri/geometry/Point","esri/layers/LayerDrawingOptions","esri/symbols/PictureMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/tasks/ClassBreaksDefinition","esri/tasks/AlgorithmicColorRamp","esri/tasks/GenerateRendererParameters","esri/tasks/GenerateRendererTask","esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/ProjectParameters","esri/geometry/webMercatorUtils","esri/SpatialReference","dojo/parser","dojo/dnd/Moveable","dojo/query","dojo/dom","dojo/dom-class","dojo/on","dojo/domReady!"],function(e,t,i,n,a,o,s,r,l,p,c,u,d,f,h,S,D,b,m,g,_,y,A,G,C,I,L,O,v,P,w,x,T,Y,k,N,M){x.parse(),app.dragInfoWindows=!0,app.clickSelectionActive=!1,app.drawSelectionActive=!1,app.userSelectedDispFieldName="",app.userSelectedShapes=[],app.customChartClicked=!1,app.shiftKey=!1,app.formattedHighlightString,app.polygonResponseCount,app.defaultMapCenter=mapCenter,app.defaultZoom=defaultZoomLevel,app.map=t("mapDiv",{basemap:"gray",center:app.defaultMapCenter,zoom:app.defaultZoom}),app.home=new o({map:app.map},"homeButton"),app.home.startup(),app.locate=new s({map:app.map},"locateButton"),app.locate.startup(),app.geocoder=new d({value:"",maxLocations:25,autoComplete:!0,arcgisGeocoder:!0,autoNavigate:!1,map:app.map},"geosearch"),app.geocoder.startup(),app.geocoder.on("select",function(e){app.clearFindGraphics(),(e.graphic?e.graphic:e.result.feature).setSymbol(Q)}),app.geocoder.on("findResults",K),app.geocoder.on("clear",app.clearFindGraphics),search_api.create("geosearch_usgs",{on_result:function(e){-1==["GNIS_MAJOR","GNIS_MINOR","ZIPCODE","AREACODE"].indexOf(e.result.properties.Source)?app.map.setExtent(new esri.geometry.Extent({xmin:e.result.properties.LonMin,ymin:e.result.properties.LatMin,xmax:e.result.properties.LonMax,ymax:e.result.properties.LatMax,spatialReference:{wkid:4326}}),!0):app.map.centerAndZoom(new b(e.result.properties.Lon,e.result.properties.Lat),12),app.map.infoWindow.setTitle("Search Result"),app.map.infoWindow.setContent($.map(Object.keys(e.result.properties),function(t){return"<b>"+t+": </b>"+e.result.properties[t]}).join("<br/>")),$("#geosearchModal").modal("hide"),app.map.infoWindow.show(new b(e.result.properties.Lon,e.result.properties.Lat))},include_usgs_sw:!0,include_huc2:!0,include_huc4:!0,include_huc6:!0,include_huc8:!0,include_huc12:!0});var R={},E=[],F=[],H=[];loadEventHandlers(),"function"==typeof esri.layers.Layer.prototype._errorHandler&&(esri.layers.Layer.prototype._errorHandler=function(e){!e||!e.message||e.message},dojo.config.deferredOnError=function(e){},dojo._ioSetArgs2=dojo._ioSetArgs,dojo._ioSetArgs=function(e,t,i,n){return dojo._ioSetArgs2(e,t,i,function(e,t){return e})}),function(e,t,i){var n;n=new esri.tasks.QueryTask(e);var a=new esri.tasks.Query;a.returnGeometry=!1,a.outFields=t,a.where=i,a.returnDistinctValues=!0,n.execute(a,U)}(serviceBaseURL+5,["ST","GP3","GP2","GP1"],"1=1"),app.setLayerDefObj=function(e){switch(e.selectedId){case"st-select":R.AOIST=e.selectedValue;break;case"grp1-select":R.AOI1=e.selectedValue;break;case"grp2-select":R.AOI2=e.selectedValue;break;case"grp3-select":R.AOI3=e.selectedValue}if($("#groupResultsSelect option").each(function(){this.disabled=!1}),R.AOI3){var t=document.getElementById("groupResultsSelect").getElementsByTagName("option");t[2].disabled=!0,t[3].disabled=!0,t[4].disabled=!0,$("#groupResultsSelect").selectpicker("render")}if(R.AOI2){var i=document.getElementById("groupResultsSelect").getElementsByTagName("option");i[1].disabled=!0,i[3].disabled=!0,i[4].disabled=!0,$("#groupResultsSelect").selectpicker("render")}R.AOI1&&(document.getElementById("groupResultsSelect").getElementsByTagName("option")[4].disabled=!0,$("#groupResultsSelect").selectpicker("render"));app.updateAOIs(e.selectedId)},app.getLayerDefObj=function(){return R},app.clearLayerDefObj=function(){R={},$("#st-select").empty(),$("#grp1-select").empty(),$("#grp2-select").empty(),$("#grp3-select").empty(),V()},app.clearOneLayerDefObj=function(e){switch(e){case"AOIST":R.AOIST=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI1":R.AOI1=void 0,app.updateAOIs("st-select"),app.updateAOIs("grp2-select"),app.updateAOIs("grp3-select");break;case"AOI2":R.AOI2=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp3-select"),app.updateAOIs("st-select");break;case"AOI3":R.AOI3=void 0,app.updateAOIs("grp1-select"),app.updateAOIs("grp2-select"),app.updateAOIs("st-select")}};var B=function(e,t){var i=[];for(var n in e)i.map(function(e){return e}).indexOf(e[n][t])<0&&i.push(e[n][t]);return i.sort()},W=function(e,t,i,n,a,o,s){return $(e).empty(),{filteredAOIOptions:E.filter(function(e){return e[t]==R[i]&&e[n]==R[a]}),prop:e,select:o,AOI:s}},j=function(e,t,i,n,a){return $(e).empty(),{filteredAOIOptions:E.filter(function(e){return e[t]==R[i]}),prop:e,select:n,AOI:a}};app.updateAOIs=function(e){var t=[];switch(Object.keys(app.getLayerDefObj()).length){case 4:var i=function(e){var t="",i="",n="",a="",o="",s="",r="",l="",p="",c="",u="",d="";switch(e){case"st-select":$("#grp1-select").empty(),a=E.filter(function(e){return e.ST===R.AOIST&&e.GP2==R.AOI2&&e.GP3===R.AOI3}),t="GP1",i="#grp1-select",n="AOI1",$("#grp2-select").empty(),l=E.filter(function(e){return e.ST===R.AOIST&&e.GP1==R.AOI1&&e.GP3===R.AOI3}),o="GP2",s="#grp2-select",r="AOI2",$("#grp3-select").empty(),d=E.filter(function(e){return e.ST===R.AOIST&&e.GP1==R.AOI1&&e.GP2===R.AOI2}),p="GP3",c="#grp3-select",u="AOI3";break;case"grp1-select":$("#st-select").empty(),a=E.filter(function(e){return e.GP1===R.AOI1&&e.GP2==R.AOI2&&e.GP3===R.AOI3}),t="ST",i="#st-select",n="AOIST",$("#grp2-select").empty(),l=E.filter(function(e){return e.GP1===R.AOI1&&e.ST==R.AOIST&&e.GP3===R.AOI3}),o="GP2",s="#grp2-select",r="AOI2",$("#grp3-select").empty(),d=E.filter(function(e){return e.GP1===R.AOI1&&e.ST==R.AOIST&&e.GP2===R.AOI2}),p="GP3",c="#grp3-select",u="AOI3";break;case"grp2-select":$("#st-select").empty(),a=E.filter(function(e){return e.GP2===R.AOI2&&e.GP1==R.AOI1&&e.GP3===R.AOI3}),t="ST",i="#st-select",n="AOIST",$("#grp1-select").empty(),l=E.filter(function(e){return e.GP2===R.AOI2&&e.ST==R.AOIST&&e.GP3===R.AOI3}),o="GP1",s="#grp1-select",r="AOI1",$("#grp3-select").empty(),d=E.filter(function(e){return e.GP2===R.AOI2&&e.ST==R.AOIST&&e.GP1===R.AOI1}),p="GP3",c="#grp3-select",u="AOI3";break;case"grp3-select":$("#st-select").empty(),a=E.filter(function(e){return e.GP3===R.AOI3&&e.GP1==R.AOI1&&e.GP2===R.AOI2}),t="ST",i="#st-select",n="AOIST",$("#grp1-select").empty(),l=E.filter(function(e){return e.GP3===R.AOI3&&e.ST==R.AOIST&&e.GP2===R.AOI2}),o="GP1",s="#grp1-select",r="AOI1",$("#grp2-select").empty(),d=E.filter(function(e){return e.GP3===R.AOI3&&e.ST==R.AOIST&&e.GP1===R.AOI1}),p="GP2",c="#grp2-select",u="AOI2"}return[{filterAOIs:a,prop:t,select:i,whichAOI:n},{filterAOIs:l,prop:o,select:s,whichAOI:r},{filterAOIs:d,prop:p,select:c,whichAOI:u}]}(e),n=B(i[0].filterAOIs,i[0].prop),a=B(i[1].filterAOIs,i[1].prop),o=B(i[2].filterAOIs,i[2].prop);z(n,i[0].select,i[0].whichAOI),z(a,i[1].select,i[1].whichAOI),z(o,i[2].select,i[2].whichAOI);break;case 3:var s="",r="",l="",p={},c={};if(R.AOI3)if(R.AOI2)if(R.AOI1)if($("#st-select").empty(),t=E.filter(function(e){return e.GP1===R.AOI1&&e.GP2==R.AOI2&&e.GP3===R.AOI3}),s="ST",r="#st-select",l="AOIST","grp1-select"==e)p=W("#grp2-select","GP1","AOI1","GP3","AOI3","GP1","AOI1"),c=W("#grp3-select","GP1","AOI1","GP2","AOI2","GP3","AOI3");else if("grp2-select"==e)p=W("#grp1-select","GP2","AOI2","GP3","AOI3","GP1","AOI1"),c=W("#grp3-select","GP2","AOI2","GP1","AOI1","GP3","AOI3");else p=W("#grp1-select","GP3","AOI3","GP2","AOI2","GP1","AOI1"),c=W("#grp2-select","GP3","AOI3","GP1","AOI1","GP2","AOI2");else if($("#grp1-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST&&e.GP2==R.AOI2&&e.GP3===R.AOI3}),s="GP1",r="#grp1-select",l="AOI1","st-select"==e)p=W("#grp2-select","ST","AOIST","GP3","AOI3","GP2","AOI2"),c=W("#grp3-select","ST","AOIST","GP2","AOI2","GP3","AOI3");else if("grp2-select"==e)p=W("#st-select","GP2","AOI2","GP3","AOI3","ST","AOIST"),c=W("#grp3-select","GP2","AOI2","ST","AOIST","GP3","AOI3");else p=W("#st-select","GP3","AOI3","GP2","AOI2","ST","AOIST"),c=W("#grp2-select","GP3","AOI3","ST","AOIST","GP2","AOI2");else if($("#grp2-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST&&e.GP1==R.AOI1&&e.GP3===R.AOI3}),s="GP2",r="#grp2-select",l="AOI2","st-select"==e)var p=W("#grp1-select","ST","AOIST","GP3","AOI3","GP1","AOI1"),c=W("#grp3-select","ST","AOIST","GP1","AOI1","GP3","AOI3");else if("grp1-select"==e)var p=W("#st-select","GP1","AOI1","GP3","AOI3","ST","AOIST"),c=W("#grp3-select","GP1","AOI1","ST","AOIST","GP3","AOI3");else var p=W("#st-select","GP3","AOI3","GP1","AOI1","ST","AOIST"),c=W("#grp1-select","GP3","AOI3","ST","AOIST","GP1","AOI1");else if($("#grp3-select").empty(),t=E.filter(function(e){return e.ST==R.AOIST&&e.GP1==R.AOI1&&e.GP2===R.AOI2}),s="GP3",r="#grp3-select",l="AOI3","st-select"==e)var p=W("#grp1-select","ST","AOIST","GP2","AOI2","GP1","AOI1"),c=W("#grp2-select","ST","AOIST","GP1","AOI1","GP2","AOI2");else if("grp1-select"==e)var p=W("#st-select","GP1","AOI1","GP2","AOI2","ST","AOIST"),c=W("#grp2-select","GP1","AOI1","ST","AOIST","GP2","AOI2");else var p=W("#st-select","GP2","AOI2","GP1","AOI1","ST","AOIST"),c=W("#grp1-select","GP2","AOI2","ST","AOIST","GP1","AOI1");0===t.length&&(t=E);var u=B(t,s),d=B(p.filteredAOIOptions,p.select),f=B(c.filteredAOIOptions,c.select);z(u,r,l),z(d,p.prop,p.AOI),z(f,c.prop,c.AOI);break;case 2:p={};var h="",S="",D="",b="",m="",g="";R.AOIST||R.AOI1?R.AOIST||R.AOI2?R.AOIST||R.AOI3?R.AOI1||R.AOI2?R.AOI1||R.AOI3?R.AOI2||R.AOI3||($("#grp2-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST&&e.GP1==R.AOI1}),p="st-select"==e?j("#grp1-select","ST","AOIST","GP1","AOI1"):j("#st-select","GP1","AOI1","ST","AOIST"),h="GP2",S="#grp2-select",D="AOI2",b="GP3",m="#grp3-select",g="AOI3"):($("#grp1-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST&&e.GP2==R.AOI2}),p="st-select"==e?j("#grp2-select","ST","AOIST","GP2","AOI2"):j("#st-select","GP2","AOI2","ST","AOIST"),h="GP1",S="#grp1-select",D="AOI1",b="GP3",m="#grp3-select",g="AOI3"):($("#grp1-select").empty(),$("#grp2-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST&&e.GP3==R.AOI3}),p="st-select"==e?j("#grp3-select","ST","AOIST","GP3","AOI3"):j("#st-select","GP3","AOI3","ST","AOIST"),h="GP1",S="#grp1-select",D="AOI1",b="GP2",m="#grp2-select",g="AOI2"):($("#st-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.GP1===R.AOI1&&e.GP2==R.AOI2}),p="grp1-select"==e?j("#grp2-select","GP1","AOI1","GP2","AOI2"):j("#grp1-select","GP2","AOI2","GP1","AOI1"),h="ST",S="#st-select",D="AOIST",b="GP3",m="#grp3-select",g="AOI3"):($("#st-select").empty(),$("#grp2-select").empty(),t=E.filter(function(e){return e.GP1===R.AOI1&&e.GP3==R.AOI3}),p="grp1-select"==e?j("#grp3-select","GP1","AOI1","GP3","AOI3"):j("#grp1-select","GP3","AOI3","GP1","AOI1"),h="ST",S="#st-select",D="AOIST",b="GP2",m="#grp2-select",g="AOI2"):($("#st-select").empty(),$("#grp1-select").empty(),t=E.filter(function(e){return e.GP2===R.AOI2&&e.GP3==R.AOI3}),p="grp2-select"==e?j("#grp3-select","GP2","AOI2","GP3","AOI3"):j("#grp2-select","GP3","AOI3","GP2","AOI2"),h="ST",S="#st-select",D="AOIST",b="GP1",m="#grp1-select",g="AOI1"),0===t.length&&(t=E);var _=B(t,h),y=(u=B(t,b),B(p.filteredAOIOptions,p.select));z(_,S,D),z(u,m,g),z(y,p.prop,p.AOI);break;case 1:var A=[],G=[],C=[];R.AOIST?($("#grp1-select").empty(),$("#grp2-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.ST===R.AOIST}),A=["GP1","GP2","GP3"],G=["#grp1-select","#grp2-select","#grp3-select"],C=["AOI1","AOI2","AOI3"]):R.AOI1?($("#st-select").empty(),$("#grp2-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.GP1===R.AOI1}),A=["ST","GP2","GP3"],G=["#st-select","#grp2-select","#grp3-select"],C=["AOIST","AOI2","AOI3"]):R.AOI2?($("#st-select").empty(),$("#grp1-select").empty(),$("#grp3-select").empty(),t=E.filter(function(e){return e.GP2===R.AOI2}),A=["ST","GP1","GP3"],G=["#st-select","#grp1-select","#grp3-select"],C=["AOIST","AOI1","AOI3"]):R.AOI3&&($("#st-select").empty(),$("#grp1-select").empty(),$("#grp2-select").empty(),t=E.filter(function(e){return e.GP3===R.AOI3}),A=["ST","GP1","GP2"],G=["#st-select","#grp1-select","#grp2-select"],C=["AOIST","AOI1","AOI2"]),0===t.length&&(t=E);for(var I=0;I<4;I++){var L=B(t,A[I]);z(L,G[I],C[I])}break;case 0:$(".aoiSelect").selectpicker("val",""),app.clearLayerDefObj()}};var z=function(e,t,i){$.each(e,function(e,i){$(t).append(new Option(i))}),$(t).selectpicker("refresh"),R[i]&&$(t).selectpicker("val",R[i])};function U(e){$.each(e.features,function(e,t){E.push(t.attributes)}),V()}function V(){var e=B(E,"GP3"),t=B(E,"GP2"),i=B(E,"GP1"),n=B(E,"ST");$.each(e,function(e,t){" "!=t&&$("#grp3-select").append(new Option(t))}),$.each(t,function(e,t){" "!=t&&$("#grp2-select").append(new Option(t))}),$.each(i,function(e,t){" "!=t&&$("#grp1-select").append(new Option(t))}),$.each(n,function(e,t){$("#st-select").append(new Option(t))}),$("#grp3-select").selectpicker("refresh"),$("#grp2-select").selectpicker("refresh"),$("#grp1-select").selectpicker("refresh"),$("#st-select").selectpicker("refresh")}app.initMapScale=function(){var e=app.map.getScale().toFixed(0);$("#scale")[0].innerHTML=addCommas(e);var t=P.webMercatorToGeographic(app.map.extent.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.updateMousePosition=function(e){if($("#mapCenterLabel").css("display","none"),null!==e.mapPoint){var t=P.webMercatorToGeographic(e.mapPoint);$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))}},app.updateMapCenter=function(e){$("#mapCenterLabel").css("display","inline");var t=P.webMercatorToGeographic(e.getCenter());$("#latitude").html(t.y.toFixed(3)),$("#longitude").html(t.x.toFixed(3))},app.setupDraggableInfoWindow=function(){if(!0===app.dragInfoWindows){var e=Y(".title",app.map.infoWindow.domNode)[0],t=new T(app.map.infoWindow.domNode,{handle:e});M(t,"FirstMove",function(){var e=Y(".outerPointer",app.map.infoWindow.domNode)[0];N.add(e,"hidden");var t=Y(".pointer",app.map.infoWindow.domNode)[0];N.add(t,"hidden")}.bind(this))}},app.executeIdentifyTask=function(e){app.shiftKey=e.shiftKey;var t=app.map.getLayer("SparrowRanking").visibleLayers[0];app.identifyParams.layerIds=[t];var i,n,o=app.map.getLayersVisibleAtScale();for(i in o)"nitroCalibration"===o[i].id&&!0===app.map.getLayer("nitroCalibration").visible&&(n=app.map.getLayer("nitroCalibration").visibleLayers[0],app.identifyParams.layerIds.push(n)),"phosCalibration"===o[i].id&&!0===app.map.getLayer("phosCalibration").visible&&(n=app.map.getLayer("phosCalibration").visibleLayers[0],app.identifyParams.layerIds.push(n));app.identifyParams.geometry=e.mapPoint,app.identifyParams.mapExtent=app.map.extent;app.identifyTask.execute(app.identifyParams).addCallback(function(t){if(app.clickSelectionActive)$.each(t,function(e,t){var i=t.feature,n="COMID"==t.displayFieldName?t.value:"'"+t.value+"'";if(app.shiftKey){var o=app.map.graphics.graphics.filter(function(e){return e.symbol.id==t.value})[0];app.map.graphics.remove(o),app.userSelectedShapes.splice(app.userSelectedShapes.indexOf(n),1),0==app.userSelectedShapes.length&&$("#chartButton").html("Show Chart for All Map Features")}else{var s=new _(_.STYLE_SOLID,new a([255,255,0]),1);s.id=t.value,i.setSymbol(s),app.map.graphics.add(i),app.userSelectedShapes.push(n),""==app.userSelectedDispFieldName&&(app.userSelectedDispFieldName=t.displayFieldName),$("#chartButton").html("Show Chart for selected features")}});else{var i=!1;if(app.map.graphics.clear(),t.length>=1&&($.each(t,function(t,n){if(18===n.layerId){var a=new esri.InfoTemplate;a.setTitle("SPARROW Phosphorus Calibration Site"),a.setContent("<div><b>Station Name:</b> "+n.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+n.feature.attributes.STAID+"</div><br><div><b>SPARROW Reach ID: </b>"+n.feature.attributes.COMID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+n.feature.attributes.LOAD_A_006+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+n.feature.attributes.PLOAD_TOTA+"</div><br>");new h;n.feature.setInfoTemplate(a),app.map.infoWindow.setFeatures([n.feature]),app.map.infoWindow.show(e.mapPoint),i=!0}if(19===n.layerId){var o=new esri.InfoTemplate;o.setTitle("SPARROW Nitrogen Calibration Site"),o.setContent("<div><b>Station Name:</b> "+n.feature.attributes.NAME+"</div><br><div><b>Station ID:</b> </b>"+n.feature.attributes.STAID+"</div><br><div><b>SPARROW Reach ID: </b>"+n.feature.attributes.COMID+"</div><br><div><b>Fluxmaster Load"+chartUnits+": </b>"+n.feature.attributes.LOAD_A_006+"</div><br><div><b>SPARROW Estimated Load "+chartUnits+": </b>"+n.feature.attributes.PLOAD_TOTA+"</div><br>");new h;n.feature.setInfoTemplate(o),app.map.infoWindow.setFeatures([n.feature]),app.map.infoWindow.show(e.mapPoint),i=!0}}),1!=i)){var n=new _(_.STYLE_SOLID,new a([255,255,0]),1);n.id=t[0].value,t[0].feature.setSymbol(n),app.map.graphics.add(t[0].feature);var o=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]);t[0].feature.attributes;if("COMID"==t[0].displayFieldName)var s=t[0].displayFieldName+" = "+t[0].value;else s=t[0].displayFieldName+" = '"+t[0].value+"'";$.each(o,function(e,t){}),app.createChartQuery(s)}}})},app.clearFindGraphics=function(){app.map.infoWindow.hide(),app.map.graphics.clear()},app.createTableQuery=function(){$("#resultsTable").empty();var e=app.map.getLayer("SparrowRanking").visibleLayers[0];if(app.map.getLayer("SparrowRanking").layerDefinitions)var t=app.map.getLayer("SparrowRanking").layerDefinitions[e];else t="1=1";var i=serviceBaseURL+e;new esri.tasks.QueryTask(i);var n=new esri.tasks.Query;n.returnGeometry=!1,n.outFields=["*"],n.where=t},app.createChartQuery=function(e){if(app.polygonResponseCount>chartFeatureMax&&void 0==e)$("#toast_title").html("Warning"),$("#toast_body").html("Cannot show chart for "+app.polygonResponseCount+" features. Please narrow Area of Interest or Group Results and try again."),$("#toast-fixed").show(),setTimeout(function(){$("#toast-fixed").hide()},4e3);else{var t;"visible"!=$("#chartWindowDiv").css("visibility")?($("#chartWindowDiv").css({visibility:"visible",height:"800px",width:"800px",top:"50px",left:"510px"}),$("#chartWindowContent").addClass("content-loading")):$("#chartWindowContent").addClass("content-loading"),$("#chartContainer").empty();var i=app.map.getLayer("SparrowRanking").visibleLayers[0];if(void 0==e)if(app.map.getLayer("SparrowRanking").layerDefinitions)var n=app.map.getLayer("SparrowRanking").layerDefinitions[i];else n="1=1";else n=e;var a=serviceBaseURL+i;t=new esri.tasks.QueryTask(a);var o=getChartOutfields(i),s=[];$.each(o,function(e,t){s.push(t.attribute)});var r=new esri.tasks.Query;r.returnGeometry=!1,r.outFields=getExtraOutfields(s,i),r.where=n,t.execute(r,q),$("#chartTabContent").addClass("content-loading")}},app.downloadChartPNG=function(){},app.getLayerConfigObject=function(e){return function(t){switch(e){case 0:return Catchments;case 1:return Group3;case 2:return Group2;case 3:return Group1;case 4:return ST;case 5:return Catchments_st;case 6:return Group3_st;case 7:return Group2_st;case 8:return Group1_st;case 9:return Catchments_tn;case 10:return Group3_tn;case 11:return Group2_tn;case 12:return Group1_tn;case 13:return ST_tn;case 14:return Catchments_st_tn;case 15:return Group3_st_tn;case 16:return Group2_st_tn;case 17:return Group1_st_tn}}()};var Q=new g({angle:0,xoffset:0,yoffset:12,type:"esriPMS",url:"../images/purple-pin.png",contentType:"image/png",width:13,height:24});new y(y.STYLE_SOLID,new _(_.STYLE_DASHDOT,new a([255,0,0]),2),new a([255,255,0,.5]));function K(e){if((e=e.results).length>0){app.clearFindGraphics();for(var t=0;t<e.length;t++);var i=new b(e[0].feature.geometry);app.map.centerAndZoom(i,17)}}function Z(e){switch(e){case 0:return $("#st-select")[0].selectedIndex>0?"ST_COMID":"COMID";case 1:return $("#st-select")[0].selectedIndex>0?"SG3":"GP3";case 2:return $("#st-select")[0].selectedIndex>0?"SG2":"GP2";case 3:return $("#st-select")[0].selectedIndex>0?"SG1":"GP1";case 4:return"ST"}}function q(e){var t=[],i=[],n=[],o=[],s=[],r=[];$.each(e.features,function(e,t){r.push($.extend(!0,{},t.attributes)),$.map(Object.keys(t.attributes),function(e,i){(e.indexOf("AREA")>-1||e.indexOf("SQKM")>-1)&&delete t.attributes[e]}),s.push(t.attributes)});var l=0;$.each(s,function(e,t){$.each(t,function(e,t){"string"!==jQuery.type(t)&&"COMID"!==e&&(l+=t)}),t.total=l,r[e].total=l,l=0}),s.sort(function(e,t){return parseFloat(t.total)-parseFloat(e.total)}),$.each(e.features[0].attributes,function(e,t){i.push(e)}),i.pop(),$.each(i,function(e,t){var i=[];$.each(s,function(e,n){0==$("#groupResultsSelect")[0].selectedIndex?i.push({y:n[t],id:n.COMID||n.ST_COMID}):i.push(n[t])}),n.push(i)}),i.shift(),$.each(n.shift(),function(e,i){void 0!==i.y?t.push(i.y):t.push(i)});var p=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]),c=[];function u(){switch($("#groupResultsSelect")[0].selectedIndex){case 0:return"Catchment ID";case 1:return"HUC12";case 2:return"HUC8";case 3:return"River Basin";case 4:return"State"}}function d(){var e,t=app.map.getLayer("SparrowRanking").visibleLayers[0],i=app.getLayerConfigObject(t);return $.each(i,function(t,i){i.field==$("#displayedMetricSelect").val()&&(e=i.name)}),e}$.each(p,function(e,t){c.push(t.label)}),F=r,H=[],$.each(c,function(e,t){H.push(t)}),J(F,H),c.shift(),$.each(c,function(e,t){o.push({name:t,turboThreshold:3e3})}),$.each(n,function(e,t){o[e].data=n[e]}),$("#chartWindowDiv").lobiPanel({unpin:!1,reload:!1,minimize:!1,close:!1,expand:!1,editTitle:!1,draggable:!0,minWidth:800,minHeight:800,maxHeight:1e3}),$("#chartWindowDiv").addClass("chartWindowMaximize"),$("#chartWindowDiv").removeClass("chartWindowMinimize"),$("#chartWindowDiv").css("visibility","visible"),$("#toast-fixed").fadeOut(),$("#toast-fixed").css("opacity","1"),"radio1"==$('.radio input[type="radio"]:checked')[0].id?$("#chartWindowPanelTitle").text("Total Phosphorus "+d()):$("#chartWindowPanelTitle").text("Total Nitrogen "+d()),(e.features.length<=1||app.customChartClicked)&&($("#chartWindowPanelTitle").append('<br/><div class=""><button type="button" class="btn-blue" data-toggle="tooltip" title="Cannot display full chart for more than '+chartFeatureMax+' features" id="popupChartButton"><span class="glyphicon glyphicon-signal"></span> Show Full Chart</button></div>'),$("#popupChartButton").tooltip({selector:'[data-toggle="tooltip"]'}),app.polygonResponseCount>chartFeatureMax?$("#popupChartButton").prop("disabled",!0):($("#popupChartButton").prop("disabled",!1),$("#popupChartButton").attr("title",null)),app.customChartClicked&&(app.customChartClicked=!1)),0==$("#chartClose").length&&$("#chartWindowDiv .dropdown").prepend('<div id="chartClose" title="close"><b>X</b></div>'),$("#popupChartButton").on("click",function(){app.formattedHighlightString="",app.map.graphics.clear(),app.createChartQuery()});var f=$("#chartWindowDiv").data("lobiPanel");f.unpin();var h=f.getPosition().x;f.setPosition(h,50),$("#chartClose").on("click",function(){app.map.graphics.clear(),$("#chartButton").html("Show Chart for All Map Features"),app.formattedHighlightString="",$("#chartWindowDiv").css("visibility","hidden"),$("#chartWindowContainer").empty(),$("#chartWindowPanelTitle").empty()}),$("#chartWindowDiv").resize(function(){var e=$("#chartWindowDiv").height(),t=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(t-50,e-105,!0)});var S="radio1"==$('.radio input[type="radio"]:checked')[0].id?phosColors:nitroColors;$("#chartWindowContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","},colors:S});Highcharts.getOptions().exporting.buttons.contextButton.menuItems;$("#chartWindowContainer").highcharts({chart:{type:"column",zoomType:"x",backgroundColor:"rgba(255, 255, 255, 0.45)",events:{selection:function(e){var t,i=[];if(e.xAxis){var n=e.xAxis[0];n&&($.each(this.series,function(e,t){$.each(t.points,function(e,t){var a;t.x>=n.min&&t.x<=n.max&&(a=0==$("#groupResultsSelect")[0].selectedIndex?t.id:t.category,-1==i.indexOf(a)&&i.push(a))})}),X(i)),console.log(i)}app.map.graphics.clear();var o=app.map.getLayer("SparrowRanking").visibleLayers[0],s=app.map.getLayer("SparrowRanking").url,r=Z($("#groupResultsSelect")[0].selectedIndex);t=new esri.tasks.QueryTask(s+o.toString());var l=new esri.tasks.Query;if(l.returnGeometry=!0,l.outSpatialReference=app.map.spatialReference,l.outFields=[r],1!=e.resetSelection){var p="";$.each(i,function(e,t){p+="COMID"==r?+t+", ":"'"+t+"', "});var c=p.slice(0,p.length-2);function u(e){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)}),$.each(e.features,function(e,t){t=t;var i=new _(_.STYLE_SOLID,new a([255,255,0]),1);i.id="zoomHighlight",t.setSymbol(i),app.map.graphics.add(t)})}l.where=r+" IN ("+c+")",t.execute(l,u)}else{if(app.formattedHighlightString){function u(e){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)}),$.each(e.features,function(e,t){t=t;var i=new _(_.STYLE_SOLID,new a([255,255,0]),1);i.id="zoomHighlight",t.setSymbol(i),app.map.graphics.add(t)})}l.where=app.formattedHighlightString,t.execute(l,u)}X()}}}},title:{text:null},subtitle:{text:null},exporting:{enabled:!0,chartOptions:{chart:{events:{load:function(){this.chartBackground.attr({fill:"rgba(255, 255, 255, 1.0)"}),this.renderer.image("https://wim.usgs.gov/visuals/usgs/usgslogo1.jpg",2,2,50,30).add()}}}},buttons:{contextButton:{text:"Chart Download / Chart Options",theme:{fill:"#0F8AFF"},symbol:null,symbolFill:"#0F8AFF",height:80,align:"right",menuItems:[{text:"Download PNG",onclick:function(){this.exportChart({type:"PNG"})}},{text:"Download CSV",onclick:function(){this.downloadCSV()}},{text:"Download Excel",onclick:function(){this.downloadXLS()}},{text:"Change Background Transparency",onclick:function(){"rgba"!=this.chartBackground.element.attributes.fill.value.substring(0,4)?this.chartBackground.attr({fill:"rgba(255, 255, 255, .45)"}):this.chartBackground.attr({fill:"rgb(255, 255, 255)"})}}]}}},xAxis:{categories:t,title:{text:"Ranked by "+u()}},yAxis:{min:0,title:{text:d()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"left",x:10,verticalAlign:"top",y:40,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1,itemWidth:300,labelFormatter:function(){var e=this.name.indexOf(")");return e>-1?this.name.substring(e+1):this.name}},tooltip:{formatter:function(){var e=this.point.index+1,t=this.point.y/this.point.stackTotal*100;return"<b>"+u()+": <b>"+this.point.category+"</b></b><br/>"+this.series.name+": <b>"+this.point.y.toFixed(2)+" ("+t.toFixed(2)+"%)</b></b><br/>"+d()+" Total: <b>"+this.point.stackTotal.toFixed(2)+"</b></b><br/>Rank: <b>"+e+"</b>"}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}},series:{point:{events:{mouseOver:function(){var e,t=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,i=app.map.getLayer("SparrowRanking").visibleLayers[0],n=app.map.getLayer("SparrowRanking").url,o=Z($("#groupResultsSelect")[0].selectedIndex);e=new esri.tasks.QueryTask(n+i.toString());var s=new esri.tasks.Query;s.returnGeometry=!0,s.outSpatialReference=app.map.spatialReference,s.outFields=[o],s.where="COMID"!=o?o+"= '"+t+"'":o+" = "+t,e.execute(s,function(e){$.each(app.map.graphics.graphics,function(e,t){void 0==t.symbol.id&&app.map.graphics.remove(t)});var t=e.features[0],i=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new a([150,49,37]),2),new a([150,49,37,.33]));t.setSymbol(i),app.map.graphics.add(t)})},click:function(e){var t,i=Z($("#groupResultsSelect")[0].selectedIndex);if(t=0==$("#groupResultsSelect")[0].selectedIndex?this.id:this.category,"COMID"!=i)var n=i+" = '"+t+"'";else n=i+" = "+t;app.map.graphics.clear(),app.createChartQuery(n)}}}}},credits:{enabled:!1},series:o}),$(".highcharts-button-box").click(function(){$.each(app.map.graphics.graphics,function(e,t){"zoomhighlight"==t.symbol.id&&app.map.graphics.remove(t)})})});var D=$("#chartWindowDiv").height()-65,b=$("#chartWindowDiv").width();$("#chartWindowContainer").highcharts().setSize(b-50,D-105,!0),$("#chartTabContent").removeClass("content-loading")}function X(e){if(void 0!==e){var t=Z($("#groupResultsSelect")[0].selectedIndex),i=[];$.each(e,function(e,n){i.push(F.filter(function(e){return e[t]==n})[0])}),J(i,H)}else J(F,H)}function J(e,t){$("#resultsTable").empty();var i=[];$("#resultsTable").addClass("hover-highlight"),$("#resultsTable").append("<thead></thead>"),$.each(t,function(e,t){var n=t.indexOf(")"),a="";a=n>-1?t.substring(n+1):t,i.push(a)});var n=$("#groupResultsSelect")[0].selectedIndex;0==n?(i.push("Catchment Area"),i.push("Upstream Area"),i.push("Total")):(i.push("Area"),i.push("Total"));var a=[];a.push("<tr>"),$.each(i,function(e,t){a.push("<th>"+t+"</th>")}),a.push("</tr>"),$("#resultsTable").find("thead").html(a.join(""));var o=[];$("#resultsTable").append('<tbody id="tableBody"></tbody>'),$.each(e,function(e,t){var i=0==n?t.COMID||t.ST_COMID:e;o.push("<tr id='row"+i+"'>"),$.each(t,function(e,t){o.push("<td>"+t+"</td>")}),o.push("</tr>")}),$("#tableBody").html(o.join("")),$(".tablesorter").trigger("updateAll"),$(".tablesorter").tablesorter({widthFixed:!0,onRenderHeader:function(){var e="radio1"==$('.radio input[type="radio"]:checked')[0].id?phosColors:nitroColors;if(this.context.cellIndex>0){var t=this.context.cellIndex-1;this.append('<div style="background:'+e[t]+';height: 3px;margin-bottom:2px;"></div>')}}})}function ee(){app.polygonResponseCount<=chartFeatureMax&&(""!=app.userSelectedDispFieldName?(app.formattedHighlightString=app.userSelectedDispFieldName+" IN ("+app.userSelectedShapes.join(",")+")",app.customChartClicked=!0,app.createMiniChartQuery(app.formattedHighlightString),app.userSelectedDispFieldName="",app.userSelectedShapes=[]):app.createMiniChartQuery()),$("#downloadDatamodal").modal("show"),$("#generalTab").tab("show")}$(document).on("mouseenter","#tableBody tr",function(e){var t,i=0==$("#groupResultsSelect")[0].selectedIndex?e.currentTarget.id.substring(3):e.currentTarget.cells[0].innerHTML,n=app.map.getLayer("SparrowRanking").visibleLayers[0],o=app.map.getLayer("SparrowRanking").url,s=Z($("#groupResultsSelect")[0].selectedIndex);t=new esri.tasks.QueryTask(o+n.toString());var r=new esri.tasks.Query;r.returnGeometry=!0,r.outSpatialReference=app.map.spatialReference,r.outFields=[s],r.where="COMID"==s?s+" = "+i:s+"= '"+i+"'",t.execute(r,function(e){$.each(app.map.graphics.graphics,function(e,t){void 0==t.symbol.id&&app.map.graphics.remove(t)});var t=e.features[0],i=new y(y.STYLE_SOLID,new _(_.STYLE_SOLID,new a([150,49,37]),2),new a([150,49,37,.33]));t.setSymbol(i),app.map.graphics.add(t)})}),$("#geosearchNav").click(function(){$("#geosearchModal").modal("show")}),app.createMiniChartQuery=function(e){var t;$("#miniChartContainer").empty();var i=app.map.getLayer("SparrowRanking").visibleLayers[0];if(void 0==e)if(app.map.getLayer("SparrowRanking").layerDefinitions)var n=app.map.getLayer("SparrowRanking").layerDefinitions[i];else n="1=1";else n=e;var a=serviceBaseURL+i;t=new esri.tasks.QueryTask(a);var o=getChartOutfields(i),s=[];$.each(o,function(e,t){s.push(t.attribute)});var r=new esri.tasks.Query;r.returnGeometry=!1,r.outFields=getExtraOutfields(s,i),r.where=n,t.execute(r,function(e){var t=[],i=[],n=[],a=[],o=[];$.each(e.features,function(e,t){$.map(Object.keys(t.attributes),function(e,i){e.indexOf("AREA")>-1&&delete t.attributes[e]}),o.push(t.attributes)});var s=0;$.each(o,function(e,t){$.each(t,function(e,t){"string"!==jQuery.type(t)&&"COMID"!==e&&(s+=t)}),t.total=s,s=0}),o.sort(function(e,t){return parseFloat(t.total)-parseFloat(e.total)}),$.each(e.features[0].attributes,function(e,t){i.push(e)}),i.pop(),$.each(i,function(e,t){var i=[];$.each(o,function(e,n){0==$("#groupResultsSelect")[0].selectedIndex?i.push({y:n[t],id:n.COMID||n.ST_COMID}):i.push(n[t])}),n.push(i)}),i.shift(),$.each(n.shift(),function(e,i){void 0!==i.y?t.push(i.y):t.push(i)});var r=getChartOutfields(app.map.getLayer("SparrowRanking").visibleLayers[0]),l=[];function p(){var e=$("#groupResultsSelect")[0].selectedIndex;switch(e){case 0:return"Catchment ID";case 1:return"HUC12";case 2:return"HUC8";case 3:return"River Basin";case 4:return"State"}}function c(){var e,t=app.getLayerConfigObject(app.map.getLayer("SparrowRanking").visibleLayers[0]);return $.each(t,function(t,i){i.field==$("#displayedMetricSelect").val()&&(e=i.name)}),e}$.each(r,function(e,t){l.push(t.label)}),l.shift(),$.each(l,function(e,t){a.push({name:t,turboThreshold:3e3})}),$.each(n,function(e,t){a[e].data=n[e]});var u="radio1"==$('.radio input[type="radio"]:checked')[0].id?phosColors:nitroColors;$("#miniChartContainer").highcharts();$(function(){Highcharts.setOptions({lang:{thousandsSep:","},colors:u});Highcharts.getOptions().exporting.buttons.contextButton.menuItems;$("#miniChartContainer").highcharts({chart:{type:"column",backgroundColor:"rgba(255, 255, 255, 0.45)"},title:{text:"radio1"==$('.radio input[type="radio"]:checked')[0].id?"Total Phosphorus"+c():"Total Nitrogen"+c()},subtitle:{text:null},exporting:{enabled:!1,chartOptions:{chart:{events:{load:function(){this.chartBackground.attr({fill:"rgba(255, 255, 255, 1.0)"}),this.renderer.image("https://wim.usgs.gov/visuals/usgs/usgslogo1.jpg",2,2,50,30).add()}}}}},xAxis:{categories:t,title:{text:"Ranked by "+p()}},yAxis:{min:0,title:{text:c()},stackLabels:{enabled:!1,style:{fontWeight:"bold",color:Highcharts.theme&&Highcharts.theme.textColor||"gray"}}},legend:{align:"left",x:10,verticalAlign:"top",y:25,floating:!1,padding:5,backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"white",borderColor:"#CCC",borderWidth:1,shadow:!1,labelFormatter:function(){var e=this.name.indexOf(")");return e>-1?this.name.substring(e+1):this.name}},tooltip:{formatter:function(){var e=this.point.index+1,t=this.point.y/this.point.stackTotal*100;return"<b>"+p()+": <b>"+this.point.category+"</b></b><br/>"+this.series.name+": <b>"+this.point.y.toFixed(2)+" ("+t.toFixed(2)+"%)</b></b><br/>"+c()+" Total: <b>"+this.point.stackTotal.toFixed(2)+"</b></b><br/>Rank: <b>"+e+"</b>"}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!1,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}},credits:{enabled:!1},series:a})})})},app.downloadPNGofChart=function(){$("#miniChartContainer").highcharts().exportChart({type:"PNG"})},app.downloadCSVofChart=function(){$("#miniChartContainer").highcharts().downloadCSV()},$("#dataDownloadNav").click(function(){ee()}),$("#aboutNav").click(function(){$("#aboutModalHeader").html("About "+appTitle+" "+appVersion),$("#aboutModal").modal("show")}),$("#userGuideNav").click(function(){$("#userGuideModal").modal("show")}),$(".showAboutDefinitions").click(function(){$("#userGuideModal").modal("hide"),$("#downloadDatamodal").modal("hide"),$("#geosearchModal").modal("hide"),$("#aboutModal").modal("show"),console.log("Opening definitions tab"),$("#definitionsTab").trigger("click")}),$("#html").niceScroll(),$("#sidebar").niceScroll(),$("#sidebar").scroll(function(){$("#sidebar").getNiceScroll().resize()}),$("#legendDiv").niceScroll(),app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight),$("#legendCollapse").on("shown.bs.collapse",function(){app.maxLegendHeight=.9*$("#mapDiv").height(),$("#legendElement").css("max-height",app.maxLegendHeight)}),$("#legendCollapse").on("hide.bs.collapse",function(){$("#legendElement").css("height","initial")}),require(["dijit/form/CheckBox"],function(e){function t(e,t,i,n,a,o){if(app.map.addLayer(i),i.visible&&void 0!==o.hasOpacitySlider&&1==o.hasOpacitySlider&&void 0!==o.hasZoomto&&1==o.hasZoomto)var s=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+'<span id="opacity'+camelize(n)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');else if(i.visible||void 0===o.hasOpacitySlider||1!=o.hasOpacitySlider||void 0===o.hasZoomto||1!=o.hasZoomto){if(i.visible&&void 0!==o.hasOpacitySlider&&1==o.hasOpacitySlider&&void 0!==o.hasZoomto&&0==o.hasZoomto)s=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-check-square-o"></i>&nbsp;&nbsp;'+n+'<span id="opacity'+camelize(n)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>');else if(!i.visible&&void 0!==o.hasOpacitySlider&&1==o.hasOpacitySlider&&void 0!==o.hasZoomto&&0==o.hasZoomto)s=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default active" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+n+'<span id="opacity'+camelize(n)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span></button></div>')}else var s=$('<div class="btn-group-vertical lyrTogDiv" style="cursor: pointer;" > <button id="'+i.id+'"type="button" class="btn btn-default" aria-pressed="true" style="font-weight: bold;text-align: left"><i class="glyphspan fa fa-square-o"></i>&nbsp;&nbsp;'+n+'<span id="opacity'+camelize(n)+'" class="glyphspan glyphicon glyphicon-adjust pull-right opacity"></span><span class="glyphicon glyphicon-search pull-right zoomto"></span></button></div>');if(s.click(function(e){if($(this).find("i.glyphspan").toggleClass("fa-check-square-o fa-square-o"),$(this).find("button").button("toggle"),e.preventDefault(),e.stopPropagation(),$("#"+camelize(n)).toggle(),i.visible){i.setVisibility(!1);var t=[];$.each(app.legend.layerInfos,function(e,i){t.push(i.layer.id)});var a=t.indexOf(i.id);a>-1&&app.legend.layerInfos.splice(a,1),app.legend.refresh()}else i.setVisibility(!0),app.legend.layerInfos.push({layer:i,title:e.currentTarget.innerText}),app.legend.refresh(),"modelArea"!=app.map.getLayer(i.id).id&&(app.legend.layerInfos.push({layer:i,title:e.currentTarget.innerText}),app.legend.refresh())}),t){var r=camelize(e);if(!$("#"+r).length){var l=$('<div id="'+r+'"><div class="alert alert-info" role="alert"><strong>'+e+"</strong></div></div>");$("#toggle").append(l)}$("#"+r).append(s),$("#opacity"+camelize(n)).length>0&&$("#opacity"+camelize(n)).hover(function(){$(".opacitySlider").remove();var e=app.map.getLayer(a.id).opacity,t=$('<div class="opacitySlider"><label id="opacityValue">Opacity: '+e+'</label><label class="opacityClose pull-right">X</label><input id="slider" type="range"></div>');$("body").append(t),$("#slider")[0].value=100*e,$(".opacitySlider").css("left",event.clientX-180),$(".opacitySlider").css("top",event.clientY-50),$(".opacitySlider").mouseleave(function(){$(".opacitySlider").remove()}),$(".opacityClose").click(function(){$(".opacitySlider").remove()}),$("#slider").change(function(e){var t=$("#slider")[0].value/100;$("#opacityValue").html("Opacity: "+t),app.map.getLayer(a.id).setOpacity(t)})}),$(".zoomto").hover(function(e){$(".zoomDialog").remove();var t=$('<div class="zoomDialog"><label class="zoomClose pull-right">X</label><br><div class="list-group"><a href="#" id="zoomscale" class="list-group-item lgi-zoom zoomscale">Zoom to scale</a> <a id="zoomcenter" href="#" class="list-group-item lgi-zoom zoomcenter">Zoom to center</a><a id="zoomextent" href="#" class="list-group-item lgi-zoom zoomextent">Zoom to extent</a></div></div>');$("body").append(t),$(".zoomDialog").css("left",e.clientX-80),$(".zoomDialog").css("top",e.clientY-5),$(".zoomDialog").mouseleave(function(){$(".zoomDialog").remove()}),$(".zoomClose").click(function(){$(".zoomDialog").remove()}),$("#zoomscale").click(function(e,t){var i=app.map.getLayer("SparrowRanking").minScale;i>0?app.map.setScale(i):console.log("No minimum scale for layer.")}),$("#zoomcenter").click(function(e,t){var i=app.map.getLayer("SparrowRanking").fullExtent.getCenter(),n=new b(i.x,i.y,new w({wkid:4326}));app.map.centerAt(n)}),$("#zoomextent")&&$("#zoomextent").click(function(e,t){var i=app.map.getLayer("SparrowRanking").fullExtent,n=new v;n.outSR=new w(102100),n.geometries=[i],geomService.project(n,function(e){var t=e[0];map.setExtent(t,new w({wkid:102100}))})})})}}$.each(allLayers,function(e,i){$.each(i.layers,function(e,n){if("agisImage"===n.wimOptions.layerType){var a=new c(n.url,n.options);n.wimOptions&&1==n.wimOptions.includeLegend&&legendLayers.push({layer:a,title:legendLayerName}),n.visibleLayers&&a.setVisibleLayers(n.visibleLayers),t(i.groupHeading,i.showGroupHeading,a,e,n.options,n.wimOptions)}else{a=new l(n.url,n.options);n.visibleLayers&&a.setVisibleLayers(n.visibleLayers),t(i.groupHeading,i.showGroupHeading,a,e,n.options,n.wimOptions)}})})})}),$(".selectpicker").selectpicker();